{"datasets":[{"name":"6d9636e5","displayName":"select_time_key","query":"select explode(array(\n  'Day',\n  'Week',\n  'Month',\n  'Quarter',\n  'Year',\n  'Hour'\n)) as time_key\n"},{"name":"304214bb","displayName":"select_warehouses_toggle","query":"  WITH billing AS (\n      SELECT workspace_id, usage_metadata.warehouse_id AS warehouse_id\n    FROM system.billing.usage u\n    WHERE usage_start_time BETWEEN date_trunc('hour', :time_range.min) AND :time_range.max\n    AND usage_metadata.warehouse_id IS NOT NULL\n    GROUP BY 1,2\n  )\n  -- Get warehouse names (most recent change record) for warehouses with usage in selected period\n  SELECT w.workspace_id, w.warehouse_id,   CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name\n  FROM billing AS b\n  JOIN system.compute.warehouses w ON b.workspace_id = w.workspace_id AND w.warehouse_id = b.warehouse_id\n  QUALIFY ROW_NUMBER() OVER(PARTITION BY w.workspace_id, w.warehouse_id ORDER BY w.change_time DESC) == 1","parameters":[{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}}]},{"name":"c6ced2fb","displayName":"select_include_metadata_toggle","query":"select explode(array(\n  'Yes',\n  'No'\n)) as toggle\n"},{"name":"3ebbfb19","displayName":"select_group_by","query":"select explode(array(\n  'Workspace Id',\n  'Warehouse',\n  'Execution Status',\n  'Query Source Type',\n  'Query Source Id',\n  'Statement Type'\n)) as toggle\n"},{"name":"74fc770a","displayName":"select_tags_filter","query":"select explode(array(\n  'Yes',\n  'No'\n)) as toggle"},{"name":"3b078105","displayName":"select_tags_case_sensitive","query":"select explode(array(\n  'Yes',\n  'No'\n)) as toggle"},{"name":"fc2d4844","displayName":"Query History With Ratios","query":"WITH raw_history AS (\n    SELECT\n        f.*,\n        CASE \n            WHEN QueryRuntimeSeconds >= CAST(:long_running_seconds_treshold AS FLOAT) \n            THEN 'Long Running' \n            ELSE 'Short Running' \n        END AS LongRunningQueryFlag,\n        CASE \n            WHEN QueryRuntimeSeconds >= CAST(:long_running_seconds_treshold AS FLOAT) \n            THEN 1 \n            ELSE 0 \n        END AS Calc_LongRunningQueryFlag\n    FROM main.dbsql_warehouse_advisor.warehouse_query_history f\n    WHERE \n    (array_contains(:workspace_id,f.workspace_id) OR array_contains(:workspace_id,'all')) \n    AND\n    f.warehouse_id IN (\n            SELECT DISTINCT warehouse_id \n            FROM system.compute.warehouses AS c\n            WHERE (array_contains(:warehouse_name, CONCAT(c.warehouse_name, ' (id:', c.warehouse_id, ')'))) -- all loads TOO much data to client  OR array_contains(:warehouse_name,'all')\n        )\n        AND start_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n),\n\ncurrent_warehouses AS (\n  SELECT warehouse_id,\n  warehouse_name,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS clean_warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  warehouse_type,\n  warehouse_channel,\n  warehouse_size,\n  min_clusters,\n  max_clusters,\n  auto_stop_minutes,\n  tags,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')')) OR array_contains(:warehouse_name,'all'))\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n),\n\npx_all AS (\n    SELECT DISTINCT\n        sku_name,\n        pricing.default AS unit_price,\n        CAST(unit_price AS DECIMAL(10,3)) AS sku_price\n    FROM system.billing.list_prices \n    QUALIFY ROW_NUMBER() OVER (PARTITION BY sku_name ORDER BY price_start_time DESC) = 1\n),\n\nhistory AS (\n    SELECT *,\n        CASE WHEN :include_metadata = 'No' THEN SUM(TotalResourceTimeUsedForAllocation) OVER ()\n            WHEN :include_metadata = 'Yes' THEN SUM(TotalResourceTimeUsedForAllocationWithMetadata) OVER ()\n        END AS TotalUsedTimeInWarehouse,\n\n         CASE WHEN :include_metadata = 'No' THEN SUM(COALESCE(TotalResourceTimeUsedForAllocation, 0)) OVER (PARTITION BY statement_text)\n            WHEN :include_metadata = 'Yes' THEN SUM(COALESCE(TotalResourceTimeUsedForAllocationWithMetadata, 0)) OVER (PARTITION BY statement_text)\n        END AS TotalStatementTextTimeUsed,\n\n        CASE \n            WHEN TotalUsedTimeInWarehouse = 0 THEN NULL \n            ELSE TotalResourceTimeUsedForAllocation / TotalUsedTimeInWarehouse \n        END AS ProportionOfWarehouseTimeUsedByQuery\n    FROM raw_history\n),\n\nfiltered_warehouse_usage AS (\n    WITH trimmed_usage AS (\n        SELECT \n            TIMESTAMPDIFF(SECOND, usage_start_time, CAST(:time_range.min AS TIMESTAMP)) AS seconds_before_start_range,\n            TIMESTAMPDIFF(SECOND, usage_start_time, usage_end_time) AS full_start_range_length,\n            TIMESTAMPDIFF(SECOND, GREATEST(CAST(:time_range.min AS TIMESTAMP), usage_start_time), usage_end_time) AS seconds_remaining_in_original_start_range,\n            GREATEST(CAST(:time_range.min AS TIMESTAMP), usage_start_time) AS trimmed_start_time,\n            LEAST(CAST(:time_range.max AS TIMESTAMP), usage_end_time) AS trimmed_end_time,\n            TIMESTAMPDIFF(SECOND, LEAST(CAST(:time_range.max AS TIMESTAMP), usage_end_time), usage_end_time) AS seconds_after_end_range,\n            TIMESTAMPDIFF(SECOND, usage_start_time, usage_end_time) AS full_end_range_length,\n            CASE \n                WHEN full_start_range_length > 0 \n                THEN COALESCE((full_start_range_length - seconds_before_start_range) / full_start_range_length, 0) \n                ELSE NULL \n            END AS StartTrimProportion,\n            CASE \n                WHEN full_end_range_length > 0 \n                THEN COALESCE((full_end_range_length - seconds_after_end_range) / full_end_range_length, 0) \n                ELSE NULL \n            END AS EndTrimProportion,\n            COALESCE(EndTrimProportion, StartTrimProportion, 1) AS TrimProportion,\n            u.usage_start_time,\n            u.usage_end_time,\n            u.usage_quantity AS dbus,\n            u.warehouse_id AS warehouse_id,\n            (CAST(px.sku_price AS FLOAT) * (1 - CAST(:dbsql_discount AS FLOAT)) * dbus) AS UsageDollars\n        FROM main.dbsql_warehouse_advisor.warehouse_usage AS u\n        INNER JOIN px_all AS px \n            ON px.sku_name = u.sku_name\n        WHERE \n            (u.warehouse_id IN (\n                SELECT DISTINCT warehouse_id \n                FROM current_warehouses\n            )\n            )\n            AND usage_unit = 'DBU'\n            AND (\n                (usage_start_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP))\n                OR (usage_end_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP))\n            )\n    )\n    SELECT \n        warehouse_id,\n        SUM(dbus * TrimProportion) AS Total_Warehouse_Period_DBUs,\n        SUM(UsageDollars * TrimProportion) AS Total_Warehouse_Period_Dollars\n    FROM trimmed_usage\n    GROUP BY warehouse_id\n),\n\nwarehouse_average_ratio_metrics AS (\n    SELECT \n        warehouse_id,\n        COALESCE(AVG(CAST(CPUTotalExecutionTime AS FLOAT)) / AVG(CAST(QueryRuntimeSeconds AS FLOAT)), 0) AS WarehouseAvgTaskSkewRatio,\n        COALESCE(MAX(CPUTotalExecutionTime) / MAX(QueryRuntimeSeconds), 0) AS WarehouseMaxTaskSkewRatio\n    FROM history\n    WHERE CPUTotalExecutionTime > 0 AND ReadDataAmountInGB > 0\n    AND execution_status NOT IN ('FAILED')\n    GROUP BY warehouse_id\n),\n\nquery_level_intel_metrics AS (\n    SELECT qh.*,\n        w.WarehouseAvgTaskSkewRatio AS WarehouseAvgTaskToExecutionTimeRatio,\n        CASE \n            WHEN CPUTotalExecutionTime > 0 \n            AND ReadDataAmountInGB > 0 \n            AND execution_status NOT IN ('FAILED')\n            THEN qh.QueryRuntimeSeconds / (qh.CPUTotalExecutionTime / w.WarehouseAvgTaskSkewRatio)\n            ELSE NULL\n        END AS QueryEfficiencyRatio,\n        u.Total_Warehouse_Period_Dollars,\n        (u.Total_Warehouse_Period_Dollars * ProportionOfWarehouseTimeUsedByQuery) AS AllocatedQueryCostByTime\n    FROM history AS qh\n    LEFT JOIN warehouse_average_ratio_metrics AS w ON w.warehouse_id = qh.warehouse_id\n    LEFT JOIN filtered_warehouse_usage AS u ON u.warehouse_id = qh.warehouse_id\n)\n\nSELECT \n    z.*,\n    -- Performance Flags\n    CASE \n        WHEN ReadDataAmountInGB > CAST(:data_volume_min_gb AS FLOAT)\n        THEN 'High Volume Read' \n        ELSE 'FINE' \n    END AS HighDataVolumeFlag,\n        CASE \n        WHEN WrittenDataAmountInGB > CAST(:data_volume_min_gb AS FLOAT)\n        THEN 'High Volume Written' \n        ELSE 'FINE' \n    END AS HighDataWritesVolumeFlag,\n-- Queuing\n    CASE \n        WHEN ProportionQueueTime > CAST(:queue_proportion_threshold AS FLOAT)\n        THEN 'High Queue Time' \n        ELSE 'FINE' \n    END AS HighQueueingTimeFlag,\n-- Result Fetch\n    CASE \n        WHEN  ProportionResultFetchTime > CAST(:result_proportion_threshold AS FLOAT)\n        THEN 'High Result Fetch Time' \n        ELSE 'FINE' \n    END AS HighResultFetchTimeFlag,\n    CASE \n        WHEN LENGTH(raw_tagged) >= 1 THEN raw_tagged \n        ELSE 'Untagged' \n    END AS QueryTag,\n\n    CASE\n    WHEN query_source_type = 'JOB' THEN CONCAT('/jobs/', query_source_id)\n    WHEN query_source_type = 'SQL QUERY' THEN CONCAT('/sql/queries/', query_source_id)\n    WHEN query_source_type = 'AI/BI DASHBOARD' THEN CONCAT('/sql/dashboardsv3/', query_source_id)\n    WHEN query_source_type = 'LEGACY DASHBOARD' THEN CONCAT('/sql/dashboards/', query_source_id)\n    WHEN query_source_type = 'ALERTS' THEN CONCAT('/sql/alerts/', query_source_id)\n    WHEN query_source_type = 'GENIE SPACE' THEN CONCAT('/genie/rooms/', query_source_id)\n    WHEN query_source_type = 'NOTEBOOK' THEN CONCAT('/editor/notebooks/', query_source_id)\n    ELSE ''\n  END as url_helper,\n  CONCAT('/sql/history?uiQueryProfileVisible=true&queryId=', statement_id) AS query_profile_url,\n    -- Warehouse-level event info\n    current_warehouses.warehouse_name,\n    current_warehouses.clean_warehouse_name,\n    current_warehouses.warehouse_type,\n    current_warehouses.warehouse_channel,\n    current_warehouses.warehouse_size,\n    current_warehouses.min_clusters,\n    current_warehouses.max_clusters,\n    current_warehouses.auto_stop_minutes,\n    current_warehouses.tags,\n    current_warehouses.change_time,\n    current_warehouses.delete_time,\nTIMESTAMPDIFF(SECOND, :time_range.min, :time_range.max) AS total_window_seconds,\nTIMESTAMPDIFF(MINUTE, :time_range.min, :time_range.max) AS total_window_minutes,\n:time_range.min AS min_time_window,\n:time_range.max AS max_time_window,\n-- cleaning performance on queue time distribution\nCASE WHEN proportionqueuetime > 1 THEN 1 ELSE round(proportionqueuetime, 1) END AS rounded_proportion_queue_time,\nCASE WHEN :group_key = 'Query Source Type' THEN query_source_type\n     WHEN :group_key = 'Execution Status' THEN execution_status\n     WHEN :group_key = 'Statement Type' THEN statement_type\n     WHEN :group_key = 'Warehouse' THEN clean_warehouse_name\n     WHEN :group_key = 'Workspace Id' THEN z.workspace_id\n     WHEN :group_key = 'Query Source Id' THEN query_source_id\nEND AS group_key,\ncase\n        when :param_time_key = 'Year' then date_trunc('YEAR', start_time)\n        when :param_time_key = 'Quarter' then date_trunc('QUARTER', start_time)\n        when :param_time_key = 'Month' then date_trunc('MONTH', start_time)\n        when :param_time_key = 'Week' then date_trunc('WEEK', start_time)\n        when :param_time_key = 'Day' then date_trunc('DAY', start_time)\n        when :param_time_key = 'Hour' then date_trunc('HOUR', start_time)\n        else start_time\n      end as time_key,\nCASE WHEN SpilledDataAmountInGB > 0 THEN 1 ELSE 0 END AS SpillMeasureFlag\nFROM query_level_intel_metrics AS z\nLEFT JOIN current_warehouses AS current_warehouses ON current_warehouses.warehouse_id = z.warehouse_id\n\n\n\n\n","parameters":[{"displayName":"long_running_seconds_treshold","keyword":"long_running_seconds_treshold","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"120"}]}}},{"displayName":"include_metadata","keyword":"include_metadata","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}},{"displayName":"dbsql_discount","keyword":"dbsql_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0.0"}]}}},{"displayName":"data_volume_min_gb","keyword":"data_volume_min_gb","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"10"}]}}},{"displayName":"queue_proportion_threshold","keyword":"queue_proportion_threshold","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0.1"}]}}},{"displayName":"result_proportion_threshold","keyword":"result_proportion_threshold","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0.1"}]}}},{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}},{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select Warehouse(s)>"}]}}},{"displayName":"group_key","keyword":"group_key","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Query Source Type"}]}}},{"displayName":"param_time_key","keyword":"param_time_key","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Day"}]}}}],"columns":[{"displayName":"QueriesPerSecond","description":"","expression":"try_divide(COUNT(statement_id),MAX(total_window_seconds))"},{"displayName":"SpillProportion","description":"","expression":"try_divide(SUM(SpillMeasureFlag), COUNT(0))"},{"displayName":"QueriesPerMinute","description":"","expression":"try_divide(COUNT(statement_id), MAX(total_window_minutes))"}]},{"name":"36bb7aba","displayName":"Cluster Scaling","query":"-- Most recent warehouse config in selected time period\nWITH  warehouse_snapshot AS (\n  SELECT warehouse_id,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  warehouse_channel,\n    warehouse_type,\n    warehouse_size,\n    min_clusters,\n    max_clusters,\n    auto_stop_minutes,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')')) OR array_contains(:warehouse_name,'all')) -- TEST OR warehouse_id = 'be0970625877facc'\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n),\n\n\nraw_scaling AS (\n    SELECT \n        DATE_TRUNC('MINUTE', w.event_time) AS event_minute,\n        MAX_BY(w.cluster_count, w.event_time) AS clusters,\n        MAX(w.warehouse_id) AS warehouse_id\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events w\n    INNER JOIN warehouse_snapshot c \n        ON w.warehouse_id = c.warehouse_id\n    WHERE w.event_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n    AND event_type IN ('RUNNING', 'SCALED_UP', 'SCALED_DOWN', 'STOPPED')\n    GROUP BY DATE_TRUNC('MINUTE', w.event_time)\n    ORDER BY event_minute\n),\n\n\nfull_series AS (\nSELECT explode(sequence((SELECT MIN(event_minute) FROM raw_scaling), (SELECT MAX(event_minute) FROM raw_scaling), INTERVAL 1 MINUTE)) AS minuteChunk\n),\n\n\nfilled_in_series AS (\n    SELECT \n        spine.minuteChunk AS event_minute,\n        MAX(s2.clusters) AS NumberOfClustersOn,\n        MAX(s2.warehouse_id) AS warehouse_id\n    FROM full_series AS spine\n    LEFT JOIN raw_scaling AS s2 \n        ON DATE_TRUNC('MINUTE', s2.event_minute) = spine.minuteChunk\n    GROUP BY spine.minuteChunk\n    ORDER BY event_minute\n),\n\nfinal_scale AS (\nSELECT event_minute,\nLAST_VALUE(NumberOfClustersOn, true) OVER (ORDER BY event_minute) AS NumberOfClustersOn,\nLAST_VALUE(w.warehouse_id, true) OVER (ORDER BY event_minute)  AS warehouse_id\n FROM filled_in_series  w\n ORDER BY warehouse_id, event_minute\n)\n\nSELECT \nf.*,\nwarehouse_channel,\nwarehouse_type,\nwarehouse_size,\nmin_clusters AS warehouse_min_clusters,\nmax_clusters AS warehouse_max_clusters,\nauto_stop_minutes AS warehouse_auto_stop_min,\ncase\n        when :param_time_key = 'Year' then date_trunc('YEAR', event_minute)\n        when :param_time_key = 'Quarter' then date_trunc('QUARTER', event_minute)\n        when :param_time_key = 'Month' then date_trunc('MONTH', event_minute)\n        when :param_time_key = 'Week' then date_trunc('WEEK', event_minute)\n        when :param_time_key = 'Day' then date_trunc('DAY', event_minute)\n        when :param_time_key = 'Hour' then date_trunc('HOUR', event_minute)\n        else event_minute\n      end as time_key\nFROM final_scale AS f\nLEFT JOIN warehouse_snapshot c ON f.warehouse_id = c.warehouse_id","parameters":[{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select a Warehouse>"}]}}},{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}},{"displayName":"param_time_key","keyword":"param_time_key","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Day"}]}}}]},{"name":"871b75c8","displayName":"Query Statement Resource Attribution","query":"WITH  warehouse_snapshot AS (\n  SELECT warehouse_id,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  warehouse_channel,\n    warehouse_type,\n    warehouse_size,\n    min_clusters,\n    max_clusters,\n    auto_stop_minutes,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')')) OR array_contains(:warehouse_name,'all')) -- TEST OR warehouse_id = 'be0970625877facc'\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n),\n\n\n\npx_all AS (\n    SELECT DISTINCT\n        sku_name,\n        pricing.default AS unit_price,\n        CAST(unit_price AS DECIMAL(10,3)) AS sku_price\n    FROM system.billing.list_prices \n    QUALIFY ROW_NUMBER() OVER (PARTITION BY sku_name ORDER BY price_start_time DESC) = 1\n),\n\nraw_history AS (\n    SELECT * \n    FROM main.dbsql_warehouse_advisor.warehouse_query_history f\n    WHERE \n    f.warehouse_id IN  (\n            SELECT DISTINCT warehouse_id FROM warehouse_snapshot\n        )\n    AND start_time >= CAST(:time_range.min AS TIMESTAMP) \n    AND end_time <= CAST(:time_range.max AS TIMESTAMP) \n    AND QueryWork > 0 -- This is how query cost is defined\n    AND statement_type IS NOT NULL\n),\n\nwarehouse_time as (\n  select\n    warehouse_id,\n         SUM(COALESCE(TotalResourceTimeUsedForAllocationWithMetadata, 0))\n         as TotalUsedTimeInWarehouse\n  from\n    raw_history\n  group by\n    warehouse_id\n),\n\nhistory AS (\n  SELECT\n    a.*,\n    b.TotalUsedTimeInWarehouse,\n         SUM(COALESCE(TotalResourceTimeUsedForAllocationWithMetadata, 0)) OVER (PARTITION BY statement_text)\n        AS TotalStatementTextTimeUsed,\n\n        CASE \n            WHEN TotalUsedTimeInWarehouse = 0 THEN NULL \n            ELSE TotalResourceTimeUsedForAllocation / TotalUsedTimeInWarehouse \n        END AS ProportionOfWarehouseTimeUsedByQuery\n  FROM\n    raw_history a\n    inner join warehouse_time b on a.warehouse_id = b.warehouse_id\n),\n-- Partition cost allocation by warehouse so you can look at multiple warehouses at once\n\nfiltered_warehouse_usage AS (\n    WITH trimmed_usage AS (\n        SELECT \n            TIMESTAMPDIFF(SECOND, usage_start_time, CAST(:time_range.min AS TIMESTAMP)) AS seconds_before_start_range,\n            TIMESTAMPDIFF(SECOND, usage_start_time, usage_end_time) AS full_start_range_length,\n            full_start_range_length - seconds_before_start_range AS seconds_remaining_in_original_start_range,\n            GREATEST(CAST(:time_range.min AS TIMESTAMP), usage_start_time) AS trimmed_start_time,\n            LEAST(CAST(:time_range.max AS TIMESTAMP), usage_end_time) AS trimmed_end_time,\n            TIMESTAMPDIFF(SECOND, CAST(:time_range.max AS TIMESTAMP), usage_end_time) AS seconds_after_end_range,\n            TIMESTAMPDIFF(SECOND, usage_start_time, usage_end_time) AS full_end_range_length,\n            full_end_range_length - seconds_after_end_range AS seconds_remaining_in_original_end_range,\n\n            CASE \n                WHEN seconds_before_start_range > 0 \n                THEN COALESCE((full_start_range_length - seconds_before_start_range) / full_start_range_length, 0) \n                ELSE NULL \n            END AS StartTrimProportion,\n            CASE \n                WHEN seconds_after_end_range > 0 \n                THEN COALESCE((full_start_range_length - seconds_after_end_range) / full_start_range_length, 0) \n                ELSE NULL \n            END AS EndTrimProportion,\n            COALESCE(EndTrimProportion, StartTrimProportion, 1) AS TrimProportion,\n            u.usage_start_time,\n            u.usage_end_time,\n            u.usage_quantity AS dbus,\n            u.warehouse_id AS warehouse_id,\n            (CAST(px.sku_price AS FLOAT) * (1 - CAST(:dbsql_discount AS FLOAT)) * dbus) AS UsageDollars\n        FROM main.dbsql_warehouse_advisor.warehouse_usage AS u\n        INNER JOIN px_all AS px \n            ON px.sku_name = u.sku_name\n        WHERE \n            usage_unit = 'DBU'\n            AND (\n                usage_start_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n                OR usage_end_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n            )\n    )\n    SELECT \n        u.warehouse_id,\n        SUM(u.dbus * TrimProportion) AS Total_Warehouse_Period_DBUs,\n        SUM(u.UsageDollars * TrimProportion) AS Total_Warehouse_Period_Dollars\n        -- Insert idle proportion here?\n    FROM trimmed_usage AS u\n    GROUP BY warehouse_id\n),\n\nhistory_with_pricing AS (\n    SELECT \n        h1.*,\n        wh.Total_Warehouse_Period_DBUs, \n        wh.Total_Warehouse_Period_Dollars\n    FROM history AS h1\n    LEFT JOIN filtered_warehouse_usage AS wh \n        ON h1.warehouse_id = wh.warehouse_id\n),\n\nquery_proportion_agg AS (\n    SELECT \n        SHA2(REGEXP_REPLACE(REGEXP_REPLACE(REGEXP_REPLACE(statement_text, '/\\\\*.*?\\\\*/', ''), '(--[^\\\\n]*)', ''), ' ', ''), 256) AS query_signature,\n        workspace_id, \n        warehouse_id,\n        MAX(statement_text) AS statement_text,\n        MAX(statement_type) AS statetment_type,\n        MIN(start_time) AS FirstRunInPeriod,\n        MAX(start_time) AS LatestRunInPeriod,\n        MAX(raw_tagged) AS raw_tagged,\n        MAX(dbt_app) AS dbt_app,\n        MAX(dbt_node_id) AS dbt_node_id,\n        MAX(dbt_profile_name) AS dbt_profile_id,\n        MAX(dbt_target_name) AS dbt_target_name,\n        MAX(dbt_version) AS dbt_version,\n        MAX(IsDBTQuery) AS IsDBTQuery,\n        FIRST(parsed_dbt_comment) AS parsed_dbt_comment,\n        COUNT(statement_id) AS NumberOfExecutions,\n        AVG(QueryRuntimeSeconds) AS AvgRuntimeInSeconds,\n        MAX(TotalUsedTimeInWarehouse) AS TotalWarehouseTimeUsed,\n        MAX(Total_Warehouse_Period_DBUs) AS Total_Warehouse_Period_DBUs,\n        MAX(Total_Warehouse_Period_Dollars) AS Total_Warehouse_Period_Dollars,\n        SUM(TotalResourceTimeUsedForAllocation) AS TotalStatementTimeUsed,\n        ARRAY_DISTINCT(COLLECT_LIST(NAMED_STRUCT('user', executed_by, 'execution_count', \n            (SELECT COUNT(statement_id) FROM history AS in_hist \n             WHERE in_hist.executed_by = u.executed_by AND in_hist.statement_text = u.statement_text)\n        ))) AS UserRunCounts\n    FROM history_with_pricing AS u\n    GROUP BY query_signature, workspace_id, warehouse_id\n),\n\nstatement_attribution AS (\n    SELECT \n        a.*,\n        CASE \n            WHEN TotalWarehouseTimeUsed = 0 THEN NULL \n            ELSE TotalStatementTimeUsed / TotalWarehouseTimeUsed \n        END AS StatementTaskTimeProportion,\n        -- Add Idle here\n        Total_Warehouse_Period_Dollars * StatementTaskTimeProportion AS StatementAllocatedDollars,\n        Total_Warehouse_Period_DBUs * StatementTaskTimeProportion AS StatementAllocatedDBUs\n    FROM query_proportion_agg a\n),\n\nstatement_rollup_cumulative_sum AS (\n    SELECT \n        *,\n        SUM(StatementTaskTimeProportion) OVER (ORDER BY StatementTaskTimeProportion DESC) AS CumulativeProportionOfWarehouseTime\n    FROM statement_attribution\n),\n\nranked_query_costs AS (\n    SELECT \n        s.*,\n        StatementTaskTimeProportion * 100 AS StatementWarehouseTimePercentage,\n        ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY StatementTaskTimeProportion DESC) AS QueryCostRank,\n        CASE \n            WHEN LENGTH(raw_tagged) >= 1 THEN raw_tagged \n            ELSE 'Untagged' \n        END AS QueryTag,\n        s.statement_text AS QueryProportionParetoFlag\n    FROM statement_rollup_cumulative_sum s\n    WHERE StatementAllocatedDollars > 0 -- Not 0 like queries with no work\n    ORDER BY CumulativeProportionOfWarehouseTime\n)\n\nSELECT \n    *,\n    CASE \n        WHEN QueryCostRank <= :top_n \n        THEN 'Top N Query' \n        ELSE 'Remaining Queries' \n    END AS TopNFilter\nFROM ranked_query_costs\nORDER BY QueryCostRank\n","parameters":[{"displayName":"top_n","keyword":"top_n","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"10"}]}}},{"displayName":"dbsql_discount","keyword":"dbsql_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select Warehouse(s)>"}]}}},{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}}]},{"name":"c767ac47","displayName":"Warehouse SCD History","query":"-- eval tags param\nWITH tag_entry_parsing as (\n  select\n    explode(split(\n    :param_tag_entries,\n      ';'\n    )) as tag_entry,\n    contains(tag_entry, '=') as is_filter,\n    if(is_filter, split(tag_entry, '=')[0], tag_entry) as tag_key,\n    monotonically_increasing_id() + 1 AS tag_id\n),\n\nexploded_usage_tags_to_compare AS (\n    SELECT DISTINCT\n    warehouse_id,\n    workspace_id,\n    account_id,\n    explode(tags)\n    FROM system.compute.warehouses AS u\n),\n\nmatched_records AS (SELECT account_id, workspace_id, warehouse_id,\n       -- array of maps that match\n      array_agg(CASE WHEN tag_id IS NOT NULL THEN concat(spine.key, '=', spine.value) END) AS matched_tags_array,\n      array_agg(concat(spine.key, '=', spine.value)) AS usage_tags_array,\n      size(matched_tags_array) AS matched_tag_count,\n      (SELECT COUNT (0) FROM tag_entry_parsing WHERE length(tag_entry) > 0) AS search_tag_count,\n      if(search_tag_count = 0 OR search_tag_count = size(matched_tags_array),\n      array_join(matched_tags_array, ';'), ''\n        )  as _custom_tag_key_value_pairs,\n      coalesce(if(_custom_tag_key_value_pairs = \"\", \"<MISMATCH>\", _custom_tag_key_value_pairs), '<UNTAGGED>') as custom_tag_key_value_pairs,\n       -- Is match yes/no\n       if(search_tag_count = 0 OR search_tag_count <= size(matched_tags_array), '<MATCHED>', '<MISMATCH>') AS IsMatched\nFROM exploded_usage_tags_to_compare AS spine\nLEFT JOIN (SELECT * FROM tag_entry_parsing WHERE length(tag_entry) > 0) AS tt ON\n    (CASE WHEN :case_sensitive = 'No'\n    THEN \n        (-- Join on Key only if is_filter = false\n        (trim(lower(tt.tag_key)) = trim(lower(spine.key)) AND tt.is_filter = false)\n        OR \n        (trim(lower(tt.tag_entry)) = concat(trim(lower(spine.key)), '=', trim(lower(spine.value))) AND tt.is_filter = true)\n        )\n    ELSE \n    (-- Join on Key only if is_filter = true\n        (tt.tag_key = spine.key AND tt.is_filter = false)\n        OR \n        (tt.tag_entry = concat(spine.key, '=', spine.value) AND tt.is_filter = true)\n        )\n    END )\nGROUP BY account_id, workspace_id, warehouse_id\n)\n\n\nSELECT w.*,\n    CONCAT('/sql/warehouses/', w.warehouse_id) AS url_helper,\n    CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name_full,\ncoalesce(m.custom_tag_key_value_pairs, '<UNTAGGED>') AS custom_tag_key_value_pairs,\nm.IsMatched\nFROM main.dbsql_warehouse_advisor.warehouse_scd w\nLEFT JOIN matched_records m ON \n    w.account_id = m.account_id\n    AND w.workspace_id = m.workspace_id\n    AND w.warehouse_id = m.warehouse_id\nWHERE\n    CASE WHEN :filter_by_tag_match = 'Yes' THEN (:param_tag_entries = '<ALL>' OR m.IsMatched = '<MATCHED>') ELSE 1=1 END\n","parameters":[{"displayName":"param_tag_entries","keyword":"param_tag_entries","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL>"}]}}},{"displayName":"case_sensitive","keyword":"case_sensitive","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}},{"displayName":"filter_by_tag_match","keyword":"filter_by_tag_match","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}}]},{"name":"fb74d1e7","displayName":"Warehouses Current","query":"\n\nWITH with_delete_flag AS (\n    SELECT * ,\n    CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS IsDeletedCurrently\n    FROM system.compute.warehouses\n    QUALIFY ROW_NUMBER() OVER(PARTITION BY account_id, workspace_id, warehouse_id ORDER BY change_time DESC) = 1\n),\n\npx_all AS (\n    SELECT DISTINCT\n        sku_name,\n        pricing.default AS unit_price,\n        CAST(unit_price AS DECIMAL(10,3)) AS sku_price\n    FROM system.billing.list_prices \n    QUALIFY ROW_NUMBER() OVER (PARTITION BY sku_name ORDER BY price_start_time DESC) = 1\n),\n\n-- Active Warehouse Metadata\nclean_usage AS (\n    SELECT \n        w.*,\n        usage_date, \n        usage_quantity AS DBUs,\n        (CAST(px.sku_price AS FLOAT) * (1 - CAST(:dbsql_discount AS FLOAT)) * usage_quantity) AS UsageDollars,\n        custom_tags\n    FROM main.dbsql_warehouse_advisor.warehouse_usage AS u\n    INNER JOIN px_all AS px \n        ON px.sku_name = u.sku_name\n    INNER JOIN with_delete_flag AS w \n        ON usage_metadata.warehouse_id = w.warehouse_id\n    WHERE warehouse_name IS NOT NULL\n    AND usage_date BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n),\n\nwarehouse_ranks AS (\n    SELECT \n        account_id, \n        workspace_id, \n        warehouse_id,\n        SUM(UsageDollars) AS total_warehouse_usage_in_period,\n        DENSE_RANK() OVER (ORDER BY SUM(UsageDollars) DESC) AS WarehouseUsageTopNRank\n    FROM clean_usage\n    GROUP BY account_id, workspace_id, warehouse_id\n),\n\n-- eval tags param\ntag_entry_parsing as (\n  select\n    explode(split(\n    :param_tag_entries,\n      ';'\n    )) as tag_entry,\n    contains(tag_entry, '=') as is_filter,\n    if(is_filter, split(tag_entry, '=')[0], tag_entry) as tag_key,\n    monotonically_increasing_id() + 1 AS tag_id\n),\n\nexploded_usage_tags_to_compare AS (\n    SELECT DISTINCT\n    warehouse_id,\n    workspace_id,\n    account_id,\n    explode(tags)\n    FROM system.compute.warehouses AS u\n),\n\nmatched_records AS (SELECT account_id, workspace_id, warehouse_id,\n       -- array of maps that match\n      array_agg(CASE WHEN tag_id IS NOT NULL THEN concat(spine.key, '=', spine.value) END) AS matched_tags_array,\n      array_agg(concat(spine.key, '=', spine.value)) AS usage_tags_array,\n      size(matched_tags_array) AS matched_tag_count,\n      (SELECT COUNT (0) FROM tag_entry_parsing WHERE length(tag_entry) > 0) AS search_tag_count,\n      if(search_tag_count = 0 OR search_tag_count = size(matched_tags_array),\n      array_join(matched_tags_array, ';'), ''\n        )  as _custom_tag_key_value_pairs,\n      coalesce(if(_custom_tag_key_value_pairs = \"\", \"<MISMATCH>\", _custom_tag_key_value_pairs), '<UNTAGGED>') as custom_tag_key_value_pairs,\n       -- Is match yes/no\n       if(search_tag_count = 0 OR search_tag_count <= size(matched_tags_array), '<MATCHED>', '<MISMATCH>') AS IsMatched\nFROM exploded_usage_tags_to_compare AS spine\nLEFT JOIN (SELECT * FROM tag_entry_parsing WHERE length(tag_entry) > 0) AS tt ON\n    (CASE WHEN :case_sensitive = 'No'\n    THEN \n        (-- Join on Key only if is_filter = false\n        (trim(lower(tt.tag_key)) = trim(lower(spine.key)) AND tt.is_filter = false)\n        OR \n        (trim(lower(tt.tag_entry)) = concat(trim(lower(spine.key)), '=', trim(lower(spine.value))) AND tt.is_filter = true)\n        )\n    ELSE \n    (-- Join on Key only if is_filter = true\n        (tt.tag_key = spine.key AND tt.is_filter = false)\n        OR \n        (tt.tag_entry = concat(spine.key, '=', spine.value) AND tt.is_filter = true)\n        )\n    END )\nGROUP BY account_id, workspace_id, warehouse_id\n)\n\n\nSELECT \n    u.*,\n    CONCAT(u.warehouse_name, ' (id:', u.warehouse_id, ')') AS warehouse_name_full,\n    CONCAT('/sql/warehouses/', u.warehouse_id) AS url_helper,\n    r.WarehouseUsageTopNRank,\ncoalesce(m.custom_tag_key_value_pairs, '<UNTAGGED>') AS custom_tag_key_value_pairs\nFROM clean_usage AS u \nINNER JOIN warehouse_ranks AS r \n    ON u.warehouse_id = r.warehouse_id \n    AND u.account_id = r.account_id \n    AND u.workspace_id = r.workspace_id\nLEFT JOIN matched_records m ON \n    u.account_id = m.account_id\n    AND u.workspace_id = m.workspace_id\n    AND u.warehouse_id = m.warehouse_id\nWHERE \n    CASE WHEN :filter_by_tag_match = 'Yes' THEN (:param_tag_entries = '<ALL>' OR m.IsMatched = '<MATCHED>') ELSE 1=1 END\n","parameters":[{"displayName":"dbsql_discount","keyword":"dbsql_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"param_tag_entries","keyword":"param_tag_entries","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL>"}]}}},{"displayName":"case_sensitive","keyword":"case_sensitive","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}},{"displayName":"filter_by_tag_match","keyword":"filter_by_tag_match","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}},{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}}]},{"name":"547c0662","displayName":"Query Queuing","query":"WITH \n  warehouse_snapshot AS (\n  SELECT warehouse_id,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')'))) -- all pulls too much data OR array_contains(:warehouse_name,'all')\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n),\n\nquery_queuing_history AS (\n  SELECT\n    statement_id,\n    w.warehouse_name,\n    UNIX_TIMESTAMP(start_time) AS query_start_epoch,\n    UNIX_TIMESTAMP(\n      TIMESTAMPADD(\n        MILLISECOND,\n        COALESCE(QueueQueryTime * 1000, 0),\n        start_time\n      )\n    ) AS queuing_end_epoch,\n    UNIX_TIMESTAMP(end_time) AS query_end_epoch\n  FROM\n    main.dbsql_warehouse_advisor.warehouse_query_history qh\n  INNER JOIN warehouse_snapshot AS w ON w.warehouse_id = qh.warehouse_id\n  WHERE\n    start_time BETWEEN CAST(:time_range.min AS TIMESTAMP)\n    AND CAST(:time_range.max AS TIMESTAMP)\n), \n\nexploded_seconds AS (\n  SELECT\n    statement_id,\n    warehouse_name,\n    epoch AS second_chunk,\n    CASE\n      WHEN epoch <= queuing_end_epoch THEN 'queued'\n      ELSE 'running'\n    END AS second_type\n  FROM\n    query_queuing_history\n  LATERAL VIEW posexplode(\n    sequence(query_start_epoch, query_end_epoch, 1)\n  ) AS pos, epoch\n), \n\nqueuing_details AS (\n  SELECT\n    warehouse_name,\n    second_chunk,\n    SUM(CASE WHEN second_type = 'queued' THEN 1 ELSE 0 END) AS QueuedCount,\n    SUM(CASE WHEN second_type = 'running' THEN 1 ELSE 0 END) AS RunningCount,\n    COUNT(DISTINCT statement_id) AS TotalQueryLoad\n  FROM\n    exploded_seconds\n  GROUP BY\n    warehouse_name, second_chunk\n), \n\nsecond_level_queuing AS (\n  SELECT\n    warehouse_name,\n    FROM_UNIXTIME(FLOOR(second_chunk / 300) * 300)::timestamp AS five_min_interval,\n    MAX(QueuedCount) AS QueuedCount,\n    MAX(RunningCount) AS RunningCount,\n    MAX(TotalQueryLoad) AS TotalQueryLoad\n  FROM\n    queuing_details\n  GROUP BY\n  warehouse_name,\n    FLOOR(second_chunk / 300)\n),\n\npre_final AS (\nSELECT\n  warehouse_name,\n  five_min_interval,\n  MAX(QueuedCount) AS PeakQueued,\n  MAX(RunningCount) AS PeakRunning,\n  MAX(TotalQueryLoad) AS PeakLoad\nFROM\n  second_level_queuing\nGROUP BY\n  warehouse_name,\n  five_min_interval\n)\n\nSELECT \n*,\ncase\n        when :param_time_key = 'Year' then date_trunc('YEAR', five_min_interval)\n        when :param_time_key = 'Quarter' then date_trunc('QUARTER', five_min_interval)\n        when :param_time_key = 'Month' then date_trunc('MONTH', five_min_interval)\n        when :param_time_key = 'Week' then date_trunc('WEEK', five_min_interval)\n        when :param_time_key = 'Day' then date_trunc('DAY', five_min_interval)\n        when :param_time_key = 'Hour' then date_trunc('HOUR', five_min_interval)\n        else five_min_interval\n      end as time_key\nFROM pre_final\nORDER BY\n  five_min_interval","parameters":[{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select Warehouse(s)>"}]}}},{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}},{"displayName":"param_time_key","keyword":"param_time_key","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Day"}]}}}]},{"name":"e139c435","displayName":"Cluster Scaling Time Agg","query":"-- Most recent warehouse config in selected time period\n\nWITH  warehouse_snapshot AS (\n  SELECT warehouse_id,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  warehouse_channel,\n    warehouse_type,\n    warehouse_size,\n    min_clusters,\n    max_clusters,\n    auto_stop_minutes,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')')) OR array_contains(:warehouse_name,'all'))\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n),\n\n\nraw_scaling AS (\n    SELECT \n        DATE_TRUNC('MINUTE', w.event_time) AS event_minute,\n        MAX_BY(w.cluster_count, w.event_time) AS clusters,\n        MAX(w.warehouse_id) AS warehouse_id\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events w\n    INNER JOIN warehouse_snapshot c \n        ON w.warehouse_id = c.warehouse_id\n    WHERE w.event_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n    AND event_type IN ('RUNNING', 'SCALED_UP', 'SCALED_DOWN', 'STOPPED')\n    GROUP BY DATE_TRUNC('MINUTE', w.event_time)\n    ORDER BY event_minute\n),\n\nfull_series AS (\n    SELECT explode(sequence((SELECT MIN(event_minute) FROM raw_scaling), (SELECT MAX(event_minute) FROM raw_scaling), INTERVAL 1 MINUTE)) AS minuteChunk\n),\n\nfilled_in_series AS (\n    SELECT \n        spine.minuteChunk AS event_minute,\n        MAX(s2.clusters) AS NumberOfClustersOn,\n        MAX(s2.warehouse_id) AS warehouse_id\n    FROM full_series AS spine\n    LEFT JOIN raw_scaling AS s2 \n        ON DATE_TRUNC('MINUTE', s2.event_minute) = spine.minuteChunk\n    GROUP BY spine.minuteChunk\n    ORDER BY event_minute\n),\n\nfinal_scale AS (\n    SELECT event_minute,\n        case\n        when :param_time_key = 'Year' then date_trunc('YEAR', event_minute)\n        when :param_time_key = 'Quarter' then date_trunc('QUARTER', event_minute)\n        when :param_time_key = 'Month' then date_trunc('MONTH', event_minute)\n        when :param_time_key = 'Week' then date_trunc('WEEK', event_minute)\n        when :param_time_key = 'Day' then date_trunc('DAY', event_minute)\n        when :param_time_key = 'Hour' then date_trunc('HOUR', event_minute)\n        else event_minute\n      end as time_key,\n    LAST_VALUE(NumberOfClustersOn, true) OVER (ORDER BY event_minute) AS NumberOfClustersOn,\n    LAST_VALUE(w.warehouse_id, true) OVER (ORDER BY event_minute)  AS warehouse_id\n    FROM filled_in_series  w\n    ORDER BY warehouse_id, event_minute\n)\n\n-- Daily Aggregation\nSELECT \n    time_key,\n    NumberOfClustersOn,\n    COUNT(*) AS total_minutes\nFROM final_scale\nGROUP BY time_key, NumberOfClustersOn\nORDER BY time_key, NumberOfClustersOn","parameters":[{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}},{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select a Warehouse>"}]}}},{"displayName":"param_time_key","keyword":"param_time_key","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Day"}]}}}]},{"name":"b7051bad","displayName":"warehouses","query":"-- eval tags param\nWITH tag_entry_parsing as (\n  select\n    explode(split(\n    :param_tag_entries,\n      ';'\n    )) as tag_entry,\n    contains(tag_entry, '=') as is_filter,\n    if(is_filter, split(tag_entry, '=')[0], tag_entry) as tag_key,\n    monotonically_increasing_id() + 1 AS tag_id\n),\n\nexploded_usage_tags_to_compare AS (\n    SELECT DISTINCT\n    warehouse_id,\n    workspace_id,\n    account_id,\n    explode(tags)\n    FROM system.compute.warehouses AS u\n),\n\nmatched_records AS (SELECT account_id, workspace_id, warehouse_id,\n       -- array of maps that match\n      array_agg(CASE WHEN tag_id IS NOT NULL THEN concat(spine.key, '=', spine.value) END) AS matched_tags_array,\n      array_agg(concat(spine.key, '=', spine.value)) AS usage_tags_array,\n      size(matched_tags_array) AS matched_tag_count,\n      (SELECT COUNT (0) FROM tag_entry_parsing WHERE length(tag_entry) > 0) AS search_tag_count,\n      if(search_tag_count = 0 OR search_tag_count = size(matched_tags_array),\n      array_join(matched_tags_array, ';'), ''\n        )  as _custom_tag_key_value_pairs,\n      coalesce(if(_custom_tag_key_value_pairs = \"\", \"<MISMATCH>\", _custom_tag_key_value_pairs), '<UNTAGGED>') as custom_tag_key_value_pairs,\n       -- Is match yes/no\n       if(search_tag_count = 0 OR search_tag_count <= size(matched_tags_array), '<MATCHED>', '<MISMATCH>') AS IsMatched\nFROM exploded_usage_tags_to_compare AS spine\nLEFT JOIN (SELECT * FROM tag_entry_parsing WHERE length(tag_entry) > 0) AS tt ON\n    (CASE WHEN :case_sensitive = 'No'\n    THEN \n        (-- Join on Key only if is_filter = false\n        (trim(lower(tt.tag_key)) = trim(lower(spine.key)) AND tt.is_filter = false)\n        OR \n        (trim(lower(tt.tag_entry)) = concat(trim(lower(spine.key)), '=', trim(lower(spine.value))) AND tt.is_filter = true)\n        )\n    ELSE \n    (-- Join on Key only if is_filter = true\n        (tt.tag_key = spine.key AND tt.is_filter = false)\n        OR \n        (tt.tag_entry = concat(spine.key, '=', spine.value) AND tt.is_filter = true)\n        )\n    END )\nGROUP BY account_id, workspace_id, warehouse_id\n)\n\nSELECT w.*,\n    CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS IsDeletedCurrently,\n    CONCAT('/sql/warehouses/', w.warehouse_id) AS url_helper,\n    CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name_full,\n    m.IsMatched,\ncoalesce(m.custom_tag_key_value_pairs, '<UNTAGGED>') AS custom_tag_key_value_pairs,\n    matched_tags_array\nFROM system.compute.warehouses AS w\nLEFT JOIN matched_records m ON \n    w.account_id = m.account_id\n    AND w.workspace_id = m.workspace_id\n    AND w.warehouse_id = m.warehouse_id\nWHERE\n    CASE WHEN :filter_by_tag_match = 'Yes' THEN (:param_tag_entries = '<ALL>' OR m.IsMatched = '<MATCHED>') ELSE 1=1 END","parameters":[{"displayName":"param_tag_entries","keyword":"param_tag_entries","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Owner;"}]}}},{"displayName":"case_sensitive","keyword":"case_sensitive","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}},{"displayName":"filter_by_tag_match","keyword":"filter_by_tag_match","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"No"}]}}}]},{"name":"12744d7e","displayName":"warehouse_cost_idle_calc","query":"WITH warehouse_snapshot AS (\n  SELECT warehouse_id,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  warehouse_channel,\n    warehouse_type,\n    warehouse_size,\n    min_clusters,\n    max_clusters,\n    auto_stop_minutes,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')')) OR array_contains(:warehouse_name,'all'))\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n  LIMIT 1\n),\nwindow_events AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events we\n    WHERE\n    EXISTS (SELECT warehouse_id FROM warehouse_snapshot ss WHERE ss.warehouse_id = we.warehouse_id)\n    AND event_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n   -- AND workspace_id = 1444828305810485 -- TEST FILTER\n),\n\n-- Get the most recent state of the warehouse before the event window\npre_window_event AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events pwe\n    WHERE \n        event_time < CAST(:time_range.min AS TIMESTAMP)\n        AND EXISTS (\n            SELECT warehouse_id \n            FROM warehouse_snapshot we \n            WHERE we.warehouse_id = pwe.warehouse_id\n        ) -- Filter for only warehouses that have events in the selected period\n    QUALIFY ROW_NUMBER() OVER (PARTITION BY pwe.workspace_id, pwe.warehouse_id ORDER BY event_time DESC) = 1\n),\n\n-- Combine Pre-Window and Window Events\nall_events AS (\n    SELECT * FROM pre_window_event\n    UNION ALL\n    SELECT * FROM window_events\n),\n\n-- Create Event Windows for Each Warehouse\nevent_windows AS (\n    SELECT \n        workspace_id, warehouse_id,\n        warehouse_state AS window_state,\n        event_time AS event_window_start,\n        LEAD(event_time, 1, CAST(:time_range.max AS TIMESTAMP)) OVER (\n            PARTITION BY warehouse_id\n            ORDER BY event_time\n        ) AS event_window_end\n    FROM all_events\n),\n\n-- Generate all seconds using `sequence` on BIGINTs\nall_seconds AS (\n    SELECT \n        e.workspace_id,\n        e.warehouse_id,\n        e.window_state,\n        CAST(second_chunk AS TIMESTAMP) AS second_chunk\n    FROM event_windows e\n    LATERAL VIEW explode(\n        sequence(\n            CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT),\n            CAST(UNIX_TIMESTAMP(e.event_window_end) - 1 AS BIGINT), -- Subtract 1 to avoid off-by-one errors\n            1\n        )\n    ) AS second_chunk\n    WHERE CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT) < CAST(UNIX_TIMESTAMP(e.event_window_end) AS BIGINT)\n),\n\n-- Weave in Query History for Each Warehouse\nraw_history AS (\n    SELECT \n        workspace_id,\n        warehouse_id, \n        query_second, \n        COUNT(0) AS queries_active\n    FROM (\n        SELECT \n        workspace_id,\n        warehouse_id, \n            explode(sequence(\n                UNIX_TIMESTAMP(date_trunc('SECOND', start_time)), \n                UNIX_TIMESTAMP(date_trunc('SECOND', end_time)), \n                1\n            )) AS query_second\n        FROM main.dbsql_warehouse_advisor.warehouse_query_history f\n        WHERE \n            EXISTS (\n                SELECT warehouse_id \n                FROM warehouse_snapshot we \n                WHERE we.warehouse_id = f.warehouse_id\n                AND we.workspace_id = f.workspace_id\n            ) -- Had scaling events (i.e., was on)\n            AND start_time < CAST(:time_range.max AS TIMESTAMP)\n            AND end_time > CAST(:time_range.min AS TIMESTAMP)\n            AND QueryRuntimeSeconds > 0\n            AND statement_type IS NOT NULL\n    ) q\n    GROUP BY workspace_id, warehouse_id, query_second\n),\n\nstate_by_second AS (\n    SELECT \n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk,\n        MAX(s.window_state) AS warehouse_state,\n        COALESCE(MAX(rh.queries_active), 0) AS query_load, -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        CASE \n            WHEN COALESCE(MAX(s.window_state), 'OFF') = 'OFF' THEN 'OFF'\n            WHEN query_load > 0 THEN 'UTILIZED'\n            WHEN query_load = 0 AND MAX(s.window_state) = 'ON' THEN 'ON_IDLE' -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        END AS utilization_flag\n    FROM all_seconds s\n    LEFT JOIN raw_history rh\n      ON s.warehouse_id = rh.warehouse_id\n         AND s.second_chunk::timestamp = rh.query_second::timestamp\n    GROUP BY\n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk\n)\n\nSELECT * ,\n        case\n        when :param_time_key = 'Year' then date_trunc('YEAR', second_chunk)\n        when :param_time_key = 'Quarter' then date_trunc('QUARTER', second_chunk)\n        when :param_time_key = 'Month' then date_trunc('MONTH', second_chunk)\n        when :param_time_key = 'Week' then date_trunc('WEEK', second_chunk)\n        when :param_time_key = 'Day' then date_trunc('DAY', second_chunk)\n        when :param_time_key = 'Hour' then date_trunc('HOUR', second_chunk)\n        else second_chunk\n      end as time_key\nFROM state_by_second\nWHERE second_chunk BETWEEN :time_range.min AND :time_range.max\n","parameters":[{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select a Warehouse>"}]}}},{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}},{"displayName":"param_time_key","keyword":"param_time_key","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Day"}]}}}]},{"name":"94dbe86a","displayName":"warehouse_idle_percent","query":"WITH warehouse_snapshot AS (\n  SELECT warehouse_id,\n  CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')') AS warehouse_name,\n  workspace_id,\n  account_id,\n  change_time,\n  delete_time,\n  warehouse_channel,\n    warehouse_type,\n    warehouse_size,\n    min_clusters,\n    max_clusters,\n    auto_stop_minutes,\n  CASE WHEN delete_time IS NOT NULL THEN 'Deleted' ELSE 'Active' END AS is_deleted\n  FROM system.compute.warehouses w\n  WHERE\n    -- workspace filter\n    (array_contains(:workspace_id,w.workspace_id) OR array_contains(:workspace_id,'all'))\n  -- warehouse filter\n    AND (array_contains(:warehouse_name, CONCAT(w.warehouse_name, ' (id:', w.warehouse_id, ')')) OR array_contains(:warehouse_name,'all'))\n  QUALIFY ROW_NUMBER() OVER (PARTITION BY workspace_id, warehouse_id ORDER BY change_time DESC) == 1 -- Get more recent snapshot\n  LIMIT 1\n),\n\nwindow_events AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events we\n    WHERE\n    EXISTS (SELECT warehouse_id FROM warehouse_snapshot ss WHERE ss.warehouse_id = we.warehouse_id)\n    AND event_time BETWEEN CAST(:time_range.min AS TIMESTAMP) AND CAST(:time_range.max AS TIMESTAMP)\n   -- AND workspace_id = 1444828305810485 -- TEST FILTER\n),\n\n-- Get the most recent state of the warehouse before the event window\npre_window_event AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events pwe\n    WHERE \n        event_time < CAST(:time_range.min AS TIMESTAMP)\n        AND EXISTS (\n            SELECT warehouse_id \n            FROM warehouse_snapshot we \n            WHERE we.warehouse_id = pwe.warehouse_id\n        ) -- Filter for only warehouses that have events in the selected period\n    QUALIFY ROW_NUMBER() OVER (PARTITION BY pwe.workspace_id, pwe.warehouse_id ORDER BY event_time DESC) = 1\n),\n\n-- Combine Pre-Window and Window Events\nall_events AS (\n    SELECT * FROM pre_window_event\n    UNION ALL\n    SELECT * FROM window_events\n),\n\n-- Create Event Windows for Each Warehouse\nevent_windows AS (\n    SELECT \n        workspace_id, warehouse_id,\n        warehouse_state AS window_state,\n        event_time AS event_window_start,\n        LEAD(event_time, 1, CAST(:time_range.max AS TIMESTAMP)) OVER (\n            PARTITION BY warehouse_id\n            ORDER BY event_time\n        ) AS event_window_end\n    FROM all_events\n),\n\n-- Generate all seconds using `sequence` on BIGINTs\nall_seconds AS (\n    SELECT \n        e.workspace_id,\n        e.warehouse_id,\n        e.window_state,\n        CAST(second_chunk AS TIMESTAMP) AS second_chunk\n    FROM event_windows e\n    LATERAL VIEW explode(\n        sequence(\n            CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT),\n            CAST(UNIX_TIMESTAMP(e.event_window_end) - 1 AS BIGINT), -- Subtract 1 to avoid off-by-one errors\n            1\n        )\n    ) AS second_chunk\n    WHERE CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT) < CAST(UNIX_TIMESTAMP(e.event_window_end) AS BIGINT)\n),\n\n-- Weave in Query History for Each Warehouse\nraw_history AS (\n    SELECT \n        workspace_id,\n        warehouse_id, \n        query_second, \n        COUNT(0) AS queries_active\n    FROM (\n        SELECT \n        workspace_id,\n        warehouse_id, \n            explode(sequence(\n                UNIX_TIMESTAMP(date_trunc('SECOND', start_time)), \n                UNIX_TIMESTAMP(date_trunc('SECOND', end_time)), \n                1\n            )) AS query_second\n        FROM main.dbsql_warehouse_advisor.warehouse_query_history f\n        WHERE \n            EXISTS (\n                SELECT warehouse_id \n                FROM warehouse_snapshot we \n                WHERE we.warehouse_id = f.warehouse_id\n                AND we.workspace_id = f.workspace_id\n            ) -- Had scaling events (i.e., was on)\n            AND start_time < CAST(:time_range.max AS TIMESTAMP)\n            AND end_time > CAST(:time_range.min AS TIMESTAMP)\n            AND QueryRuntimeSeconds > 0\n            AND statement_type IS NOT NULL\n    ) q\n    GROUP BY workspace_id, warehouse_id, query_second\n),\n\nstate_by_second AS (\n    SELECT \n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk,\n        MAX(s.window_state) AS warehouse_state,\n        COALESCE(MAX(rh.queries_active), 0) AS query_load, -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        CASE \n            WHEN COALESCE(MAX(s.window_state), 'OFF') = 'OFF' THEN 'OFF'\n            WHEN query_load > 0 THEN 'UTILIZED'\n            WHEN query_load = 0 AND MAX(s.window_state) = 'ON' THEN 'ON_IDLE' -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        END AS utilization_flag\n    FROM all_seconds s\n    LEFT JOIN raw_history rh\n      ON s.warehouse_id = rh.warehouse_id\n         AND s.second_chunk::timestamp = date_trunc('SECOND', rh.query_second::timestamp)\n    GROUP BY\n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk\n)\n\n-- Final Aggregation by Warehouse\nSELECT \n    workspace_id,\n    warehouse_id,\n    COUNT(CASE WHEN utilization_flag = 'UTILIZED' THEN second_chunk END) AS utilized_seconds,\n    COUNT(CASE WHEN utilization_flag = 'ON_IDLE' THEN second_chunk END) AS idle_seconds,\n    COUNT(*) AS total_seconds,\n   round(\n        CASE \n            WHEN COUNT(*) = 0 THEN 0 \n            ELSE COUNT(CASE WHEN utilization_flag = 'UTILIZED' THEN second_chunk END) / (COUNT(CASE WHEN utilization_flag = 'UTILIZED' THEN second_chunk END)  + COUNT(CASE WHEN utilization_flag = 'ON_IDLE' THEN second_chunk END))\n        END, \n        2\n    ) AS utilization_proportion\nFROM state_by_second\nGROUP BY\n    workspace_id,\n    warehouse_id\n","parameters":[{"displayName":"time_range","keyword":"time_range","dataType":"DATETIME","complexType":"RANGE","defaultSelection":{"range":{"dataType":"DATETIME","min":{"value":"now-7d/d"},"max":{"value":"now-1d/d"}}}},{"displayName":"workspace_id","keyword":"workspace_id","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"all"}]}}},{"displayName":"warehouse_name","keyword":"warehouse_name","dataType":"STRING","complexType":"MULTI","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<Select a Warehouse>"}]}}}]},{"name":"e8b5cad9","displayName":"experimental_mean_idle_time_dist","query":"WITH warehouse_snapshot AS (\n    SELECT DISTINCT warehouse_id, workspace_id\n    FROM system.compute.warehouses\n    WHERE warehouse_id = :warehouse_id\n    LIMIT 1\n),\nwindow_events AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events we\n    WHERE\n    EXISTS (SELECT warehouse_id FROM warehouse_snapshot ss WHERE ss.warehouse_id = we.warehouse_id)\n    AND event_time BETWEEN CAST(:start_time AS TIMESTAMP) AND CAST(:end_time AS TIMESTAMP)\n),\n\n-- Get the most recent state of the warehouse before the event window\npre_window_event AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events pwe\n    WHERE \n        event_time < CAST(:start_time AS TIMESTAMP)\n        AND EXISTS (\n            SELECT warehouse_id \n            FROM warehouse_snapshot we \n            WHERE we.warehouse_id = pwe.warehouse_id\n        ) -- Filter for only warehouses that have events in the selected period\n    QUALIFY ROW_NUMBER() OVER (PARTITION BY pwe.workspace_id, pwe.warehouse_id ORDER BY event_time DESC) = 1\n),\n\n-- Combine Pre-Window and Window Events\nall_events AS (\n    SELECT * FROM pre_window_event\n    UNION ALL\n    SELECT * FROM window_events\n),\n\n-- Create Event Windows for Each Warehouse\nevent_windows AS (\n    SELECT \n        workspace_id, warehouse_id,\n        warehouse_state AS window_state,\n        event_time AS event_window_start,\n        LEAD(event_time, 1, CAST(:end_time AS TIMESTAMP)) OVER (\n            PARTITION BY warehouse_id\n            ORDER BY event_time\n        ) AS event_window_end\n    FROM all_events\n),\n\n-- Generate all seconds using `sequence` on BIGINTs\nall_seconds AS (\n    SELECT \n        e.workspace_id,\n        e.warehouse_id,\n        e.window_state,\n        CAST(second_chunk AS TIMESTAMP) AS second_chunk\n    FROM event_windows e\n    LATERAL VIEW explode(\n        sequence(\n            CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT),\n            CAST(UNIX_TIMESTAMP(e.event_window_end) - 1 AS BIGINT), -- Subtract 1 to avoid off-by-one errors\n            1\n        )\n    ) AS second_chunk\n    WHERE CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT) < CAST(UNIX_TIMESTAMP(e.event_window_end) AS BIGINT)\n),\n\n-- Weave in Query History for Each Warehouse\nraw_history AS (\n    SELECT \n        workspace_id,\n        warehouse_id, \n        query_second, \n        COUNT(0) AS queries_active\n    FROM (\n        SELECT \n        workspace_id,\n        warehouse_id, \n            explode(sequence(\n                UNIX_TIMESTAMP(date_trunc('SECOND', start_time)), \n                UNIX_TIMESTAMP(date_trunc('SECOND', end_time)), \n                1\n            )) AS query_second\n        FROM main.dbsql_warehouse_advisor.warehouse_query_history f\n        WHERE \n            EXISTS (\n                SELECT warehouse_id \n                FROM warehouse_snapshot we \n                WHERE we.warehouse_id = f.warehouse_id\n                AND we.workspace_id = f.workspace_id\n            ) -- Had scaling events (i.e., was on)\n            AND start_time < CAST(:end_time AS TIMESTAMP)\n            AND end_time > CAST(:start_time AS TIMESTAMP)\n            AND QueryRuntimeSeconds > 0\n            AND statement_type IS NOT NULL\n    ) q\n    GROUP BY workspace_id, warehouse_id, query_second\n),\n\nstate_by_second AS (\n    SELECT \n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk,\n        MAX(s.window_state) AS warehouse_state,\n        COALESCE(MAX(rh.queries_active), 0) AS query_load, -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        CASE \n            WHEN COALESCE(MAX(s.window_state), 'OFF') = 'OFF' THEN 'OFF'\n            WHEN query_load > 0 THEN 'UTILIZED'\n            WHEN query_load = 0 AND MAX(s.window_state) = 'ON' THEN 'ON_IDLE' -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        END AS utilization_flag\n    FROM all_seconds s\n    LEFT JOIN raw_history rh\n      ON s.warehouse_id = rh.warehouse_id\n         AND s.second_chunk = rh.query_second::timestamp\n    GROUP BY\n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk\n),\n\nstate_transitions AS (\n    SELECT \n        second_chunk,\n        query_load,\n        warehouse_state,\n        utilization_flag,\n        -- Get the next `OFF` or `UTILIZED` state\n        LEAD(second_chunk) OVER (\n            PARTITION BY CASE WHEN utilization_flag IN ('OFF', 'UTILIZED') THEN 1 ELSE 0 END\n            ORDER BY second_chunk\n        ) AS next_second,\n\n        LEAD(utilization_flag) OVER (\n            PARTITION BY CASE WHEN utilization_flag IN ('OFF', 'UTILIZED') THEN 1 ELSE 0 END\n            ORDER BY second_chunk\n        ) AS next_state\n    FROM state_by_second\n),\n\nidle_to_active AS (\n    SELECT \n        *,\n        round(timestampdiff(SECOND, second_chunk, next_second)/60, 1) AS idle_duration_min --space between is ON_IDLE\n    FROM state_transitions AS st\n    WHERE utilization_flag IN ('OFF','UTILIZED') AND next_state IN ('UTILIZED', 'OFF')\n)\n\nSELECT * FROM idle_to_active\n","parameters":[{"displayName":"warehouse_id","keyword":"warehouse_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"475b94ddc7cd5211"}]}}},{"displayName":"start_time","keyword":"start_time","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now-7d/d"}]}}},{"displayName":"end_time","keyword":"end_time","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now-5m/m"}]}}}]},{"name":"d41d2845","displayName":"all_warehouse_idle","query":"WITH window_events AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events\n    WHERE\n    event_time BETWEEN CAST(:start_time AS TIMESTAMP) AND CAST(:end_time AS TIMESTAMP)\n   -- AND workspace_id = 1444828305810485 -- TEST FILTER\n),\n\n-- Get the most recent state of the warehouse before the event window\npre_window_event AS (\n    SELECT \n        workspace_id, \n        warehouse_id,\n        event_type,\n        event_time,\n        cluster_count AS cluster_count,\n        CASE \n            WHEN cluster_count = 0 THEN 'OFF'\n            WHEN cluster_count > 0 THEN 'ON'\n        END AS warehouse_state\n    FROM main.dbsql_warehouse_advisor.warehouse_scaling_events pwe\n    WHERE \n        event_time < CAST(:start_time AS TIMESTAMP)\n        AND EXISTS (\n            SELECT warehouse_id \n            FROM window_events we \n            WHERE we.warehouse_id = pwe.warehouse_id\n        ) -- Filter for only warehouses that have events in the selected period\n    QUALIFY ROW_NUMBER() OVER (PARTITION BY pwe.workspace_id, pwe.warehouse_id ORDER BY event_time DESC) = 1\n),\n\n-- Combine Pre-Window and Window Events\nall_events AS (\n    SELECT * FROM pre_window_event\n    UNION ALL\n    SELECT * FROM window_events\n),\n\n-- Create Event Windows for Each Warehouse\nevent_windows AS (\n    SELECT \n        workspace_id, warehouse_id,\n        warehouse_state AS window_state,\n        event_time AS event_window_start,\n        LEAD(event_time, 1, CAST(:end_time AS TIMESTAMP)) OVER (\n            PARTITION BY warehouse_id\n            ORDER BY event_time\n        ) AS event_window_end\n    FROM all_events\n),\n\n-- Generate all seconds using `sequence` on BIGINTs\nall_seconds AS (\n    SELECT \n        e.workspace_id,\n        e.warehouse_id,\n        e.window_state,\n        CAST(second_chunk AS TIMESTAMP) AS second_chunk\n    FROM event_windows e\n    LATERAL VIEW explode(\n        sequence(\n            CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT),\n            CAST(UNIX_TIMESTAMP(e.event_window_end) - 1 AS BIGINT), -- Subtract 1 to avoid off-by-one errors\n            1\n        )\n    ) AS second_chunk\n    WHERE CAST(UNIX_TIMESTAMP(e.event_window_start) AS BIGINT) < CAST(UNIX_TIMESTAMP(e.event_window_end) AS BIGINT)\n),\n\n-- Weave in Query History for Each Warehouse\nraw_history AS (\n    SELECT \n        workspace_id,\n        warehouse_id, \n        query_second, \n        COUNT(0) AS queries_active\n    FROM (\n        SELECT \n        workspace_id,\n        warehouse_id, \n            explode(sequence(\n                UNIX_TIMESTAMP(date_trunc('SECOND', start_time)), \n                UNIX_TIMESTAMP(date_trunc('SECOND', end_time)), \n                1\n            )) AS query_second\n        FROM main.dbsql_warehouse_advisor.warehouse_query_history f\n        WHERE \n            EXISTS (\n                SELECT warehouse_id \n                FROM window_events we \n                WHERE we.warehouse_id = f.warehouse_id\n                AND we.workspace_id = f.workspace_id\n            ) -- Had scaling events (i.e., was on)\n            AND start_time < CAST(:end_time AS TIMESTAMP)\n            AND end_time > CAST(:start_time AS TIMESTAMP)\n            AND QueryRuntimeSeconds > 0\n            AND statement_type IS NOT NULL\n    ) q\n    GROUP BY workspace_id, warehouse_id, query_second\n),\n\nstate_by_second AS (\n    SELECT \n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk,\n        MAX(s.window_state) AS warehouse_state,\n        COALESCE(MAX(rh.queries_active), 0) AS query_load, -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        CASE \n            WHEN COALESCE(MAX(s.window_state), 'OFF') = 'OFF' THEN 'OFF'\n            WHEN query_load > 0 THEN 'UTILIZED'\n            WHEN query_load = 0 AND MAX(s.window_state) = 'ON' THEN 'ON_IDLE' -- queries_active will be null on this join because there were no queries for that warehouse active in the second\n        END AS utilization_flag\n    FROM all_seconds s\n    LEFT JOIN raw_history rh\n      ON s.warehouse_id = rh.warehouse_id\n         AND s.second_chunk = rh.query_second::timestamp\n    GROUP BY\n        s.workspace_id,\n        s.warehouse_id,\n        s.second_chunk\n)\n\n-- Final Aggregation by Warehouse\nSELECT \n    workspace_id,\n    warehouse_id,\n    COUNT(CASE WHEN utilization_flag = 'UTILIZED' THEN second_chunk END) AS utilized_seconds,\n    COUNT(CASE WHEN utilization_flag = 'ON_IDLE' THEN second_chunk END) AS idle_seconds,\n    COUNT(*) AS total_seconds,\n   round(\n        CASE \n            WHEN COUNT(*) = 0 THEN 0 \n            ELSE COUNT(CASE WHEN utilization_flag = 'UTILIZED' THEN second_chunk END) / (COUNT(CASE WHEN utilization_flag = 'UTILIZED' THEN second_chunk END)  + COUNT(CASE WHEN utilization_flag = 'ON_IDLE' THEN second_chunk END))\n        END, \n        2\n    ) AS utilization_proportion,\n    CONCAT(\n        '<div style=\"position: relative; height: 20px; border-radius: 4px;\">',\n        '<div style=\"position: absolute; width: ', \n        utilization_proportion*100, \n        '%; height: 100%; background: lightblue; border-radius: 4px;\"></div>',\n        '<span style=\"position: absolute; width: 100%; text-align: center; line-height: 20px; font-weight: bold; color:', \n        CASE \n            WHEN utilization_proportion <= .20 THEN 'red' \n            WHEN utilization_proportion <= .40 THEN 'yellow' \n            ELSE 'green' \n        END, \n        ';\">',\n        utilization_proportion, \n        '%</span></div>'\n    ) AS utilization_proportion_html\nFROM state_by_second\nGROUP BY\n    workspace_id,\n    warehouse_id\nORDER BY utilization_proportion DESC\n","parameters":[{"displayName":"start_time","keyword":"start_time","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now-7d/d"}]}}},{"displayName":"end_time","keyword":"end_time","dataType":"DATETIME","defaultSelection":{"values":{"dataType":"DATETIME","values":[{"value":"now-5m/m"}]}}}]}],"pages":[{"name":"47988ca7","displayName":"README","layout":[{"widget":{"name":"10c0c602","textbox_spec":"# DBSQL Warehouse Advisor\n-----\n\n## Sections\n1. Warehouse Usage- show basic billing usage and cost metrics for a warehouse (dbus, $, over time)\n2. Scaling Patterns - shows basic scaling metrics per warehouse (scaling history, avg scale (weighted))\n3. Performance Advisor - Show common query history metrics such as runtime, queue time, peak queuing, failure rate, cache %, etc., identify inefficient queries with skew/spill indicators\n4. Query Statement Level Resource Allocation Advisor - Identify and allocate warehouse total used time by statement and query (optionally include and aggregate by TAG)\n-----"},"position":{"x":0,"y":0,"width":6,"height":4}},{"widget":{"name":"f9f66915","textbox_spec":"## Section 1 - Warehouse Usage\n-----\nThis section shows basic warehouse usage over time across the account. It also provides a table showing the changes / edits to a warehouse over time\n\n#### Key Terms & Definitions\n-----\n1. DBSQL Discount % - this is a parameter that allows a user to input their own discount rates for all DBSQL SKUs into the dashboard to get a more accurate picture of warehouse costs. The system tables currently show all prices at list rate, so this helps resolve custom discounts for DBSQL. "},"position":{"x":0,"y":4,"width":6,"height":4}},{"widget":{"name":"7d283dd2","textbox_spec":"## Section 2 - Scaling Patterns\n-----\nThis section shows summary metrics for how the warehouse scales for concurrency in a particular period of time. Common use cases for this section include workload capacity planning, scaling efficiency change monitoring (i.e. create an alert when warehouse scales above 1 cluster for longer than 5% of my day), as well as performance troubleshooting. \n\n#### Key Terms & Definitions\n-----\n1. \"Mintues on Cluster N\" - this is a summary metric for describing how much time a warehouse spent scaled at a specified level of concurrency. This is used for building weighted demand plans for spiky concurrency workloads more accurately. "},"position":{"x":0,"y":8,"width":6,"height":4}},{"widget":{"name":"9f6d0b20","textbox_spec":"## Section 3 - Performance Advisor\n-----\nThis section helps dive into warehouse performance to understand how well the warehouse is performing against SLAs, identifying bottlenecks, as well as queries that are taking up the majority of the resources.\n\n#### Key Terms & Definitions\n-----\n1. Query Runtime (P50, 75, 95, 99) - The distribution metrics of query runtime. This is the metric used to measure SLAs\n2. % Query Queue Time - The proportion of a query's total runtime that was spent in the queue. This is a valuable metric to normalized for wasted time queueing for both short and long queries. \n3. Queue Time - The amount of time queries are spending in the queue. This can vary in importance by the length of the query. \n4. Peak Queued / Peak Running - This represents the maximum number of queries queued or running at a given point in time. \n5. Query Work - This is a non financial metric to measure and compare how \"expensive\" or \"greedy\" queries are without doing shared resource allocation (which can be skewed in many scenarios). Query Work is the sum of all steps that require cluster resources. Query Work = execution time + compilation time + result fetching time. \n6. Allocated Query Cost by Time - ALL Query level costs in this dashboard are allocated costs. This means that a warehouse is a shared resource, and allocation the total cost of a warehouse to specific queries / users depends on dividing up the total costs by the amount of query work done. This allows users to loosely attribute dollars back to end users / queries. This is valuable but sensitive to the selected time window and the amount of queries running on a cluster. For example, if I have a warehouse that costs $10 per hour, and I run 1 query that only takes 1 second, then that query will be allocated the whole $10 if no other queries are run. Conversely, if I run 10 queries in that hour, those queries will have that $10 allocated in proportion to the amount of \"work\" each query took. "},"position":{"x":0,"y":12,"width":6,"height":7}},{"widget":{"name":"08f050cf","textbox_spec":"## Section 4 - Query Cost Allocation\n-----\nThis section helps users allocate the cost of a warehouse back to the user and query level detail. In this section, you can even attribute shared warehouse costs down to query tags (custom in the data model) as well as DBT model information. This is an ALLOCATION - which means it simply takes the cost of a whole warehouse in the selected time period and attributes that actual cost proportionally to the queries that are run during that time. This is sensitive to the saturation of a warehouse as well as idle time. For example, if I have a warehouse that costs $10 per hour, and I run 1 query that only takes 1 second, then that query will be allocated the whole $10 if no other queries are run. Conversely, if I run 10 queries in that hour, those queries will have that $10 allocated in proportion to the amount of \"work\" each query took. This is different than query work, which is defined above and is a more reliable deterministic way of finding expensive / greedy queries on a warehouse. \n\n#### Key Terms & Definitions\n-----\n1. Query Signature - This is the term for a unique SQL statement that is executed on the warehouse. This is different than a statement_id - which is a globally unique execution of SQL. The query signature rolls multiple statement executions up to a unique SQL string. In the signature - the SQL statement is hash and aggregated, excluding comments in the SQL. "},"position":{"x":0,"y":19,"width":6,"height":7}}]},{"name":"ac79703d","displayName":"Warehouse Usage Summary","layout":[{"widget":{"name":"0bf0fbc1","textbox_spec":"# Overall Warehouses (all) Usage & Info Overview\n-----\nThis section helps users get a simple cost picture for their warehouse over time, as well as obtain a clear picture of momentum of cost over time - which can easily be turned into an alert. "},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"289ccdd7","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_warehouse_name_full","query":{"datasetName":"fb74d1e7","fields":[{"name":"warehouse_name_full","expression":"`warehouse_name_full`"},{"name":"warehouse_name_full_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_warehouse_name_full","query":{"datasetName":"c767ac47","fields":[{"name":"warehouse_name_full","expression":"`warehouse_name_full`"},{"name":"warehouse_name_full_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_warehouse_name_full","query":{"datasetName":"b7051bad","fields":[{"name":"warehouse_name_full","expression":"`warehouse_name_full`"},{"name":"warehouse_name_full_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"warehouse_name_full","displayName":"warehouse_name_full","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_warehouse_name_full"},{"fieldName":"warehouse_name_full","displayName":"warehouse_name_full","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_warehouse_name_full"},{"fieldName":"warehouse_name_full","displayName":"warehouse_name_full","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_warehouse_name_full"}]},"frame":{"showTitle":true,"title":"Warehouse"}}},"position":{"x":1,"y":4,"width":2,"height":2}},{"widget":{"name":"c750b2b4","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"warehouse_name_full","expression":"`warehouse_name_full`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(DBUs)","expression":"SUM(`DBUs`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Usage Date"},"y":{"fieldName":"sum(DBUs)","scale":{"type":"quantitative"},"displayName":"DBUs"},"color":{"fieldName":"warehouse_name_full","scale":{"type":"categorical"},"legend":{"position":"bottom"},"displayName":"Warehouse Name"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Usage Proportion By Name"},"mark":{"layout":"percent-stack"}}},"position":{"x":0,"y":21,"width":6,"height":7}},{"widget":{"name":"58e81119","queries":[{"name":"main_query","query":{"datasetName":"c767ac47","fields":[{"name":"warehouse_id","expression":"`warehouse_id`"},{"name":"warehouse_name","expression":"`warehouse_name`"},{"name":"ChangeRank","expression":"`ChangeRank`"},{"name":"action_name","expression":"`action_name`"},{"name":"warehouse_size","expression":"`warehouse_size`"},{"name":"min_cluster_scaling","expression":"`min_cluster_scaling`"},{"name":"max_cluster_scaing","expression":"`max_cluster_scaing`"},{"name":"auto_stop_mins","expression":"`auto_stop_mins`"},{"name":"warehouse_editor_user","expression":"`warehouse_editor_user`"},{"name":"workspace_id","expression":"`workspace_id`"},{"name":"account_id","expression":"`account_id`"},{"name":"event_time","expression":"`event_time`"},{"name":"warehouse_channel","expression":"`warehouse_channel`"},{"name":"RecencyRank","expression":"`RecencyRank`"},{"name":"IsDeleted","expression":"`IsDeleted`"},{"name":"custom_tag_key_value_pairs","expression":"`custom_tag_key_value_pairs`"},{"name":"IsMatched","expression":"`IsMatched`"},{"name":"url_helper","expression":"`url_helper`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"warehouse_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ url_helper }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"link","visible":true,"order":0,"title":"warehouse_id (link)","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_id"},{"fieldName":"warehouse_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"warehouse_name","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_name"},{"fieldName":"ChangeRank","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":2,"title":"ChangeRank","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ChangeRank"},{"fieldName":"action_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"action_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"action_name"},{"fieldName":"warehouse_size","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":4,"title":"warehouse_size","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_size"},{"fieldName":"min_cluster_scaling","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":5,"title":"min_cluster_scaling","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"min_cluster_scaling"},{"fieldName":"max_cluster_scaing","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":6,"title":"max_cluster_scaing","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"max_cluster_scaing"},{"fieldName":"auto_stop_mins","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":7,"title":"auto_stop_mins","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"auto_stop_mins"},{"fieldName":"warehouse_editor_user","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":8,"title":"warehouse_editor_user","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_editor_user"},{"fieldName":"workspace_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":9,"title":"workspace_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"workspace_id"},{"fieldName":"account_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":10,"title":"account_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"account_id"},{"fieldName":"event_time","dateTimeFormat":"DD/MM/YY HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":11,"title":"event_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"event_time"},{"fieldName":"warehouse_channel","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":13,"title":"warehouse_channel","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_channel"},{"fieldName":"RecencyRank","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":14,"title":"RecencyRank","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"RecencyRank"},{"fieldName":"IsDeleted","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":15,"title":"IsDeleted","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"IsDeleted"},{"fieldName":"custom_tag_key_value_pairs","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":16,"title":"custom_tag_key_value_pairs","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"custom_tag_key_value_pairs"},{"fieldName":"IsMatched","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":17,"title":"Matched Tag Flag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"IsMatched"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"warehouse_type","type":"string","displayAs":"string","order":12,"title":"warehouse_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"url_helper","type":"string","displayAs":"string","order":18,"title":"url_helper","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"response","type":"complex","displayAs":"json","order":100004,"title":"response","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"request_params","type":"complex","displayAs":"json","order":100005,"title":"request_params","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"dateTimeFormat":"YYYY-MM-DD","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"event_date","type":"date","displayAs":"datetime","order":100001,"title":"event_date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"title":"Warehouse Change History (recommended to pick 1 warehouse for best readability)"}}},"position":{"x":0,"y":44,"width":6,"height":9}},{"widget":{"name":"b055cdbe","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_WarehouseUsageTopNRank","query":{"datasetName":"fb74d1e7","fields":[{"name":"min(WarehouseUsageTopNRank)","expression":"MIN(`WarehouseUsageTopNRank`)"},{"name":"max(WarehouseUsageTopNRank)","expression":"MAX(`WarehouseUsageTopNRank`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"range-slider","encodings":{"fields":[{"fieldName":"WarehouseUsageTopNRank","displayName":"WarehouseUsageTopNRank","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_WarehouseUsageTopNRank"}]},"frame":{"showTitle":true,"title":"Top N Warehouse By Usage","showDescription":true,"description":"Filter this section by top N warehouse by total usage in period"}}},"position":{"x":4,"y":2,"width":1,"height":2}},{"widget":{"name":"5016b589","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_time_range","query":{"datasetName":"fb74d1e7","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_time_range"}]},"frame":{"showTitle":true,"title":"Warehouse Usage Time Window"}}},"position":{"x":0,"y":2,"width":2,"height":2}},{"widget":{"name":"7fb2ff38","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_param_tag_entries","query":{"datasetName":"c767ac47","parameters":[{"name":"param_tag_entries","keyword":"param_tag_entries"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_param_tag_entries","query":{"datasetName":"fb74d1e7","parameters":[{"name":"param_tag_entries","keyword":"param_tag_entries"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_param_tag_entries","query":{"datasetName":"b7051bad","parameters":[{"name":"param_tag_entries","keyword":"param_tag_entries"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"param_tag_entries","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_param_tag_entries"},{"parameterName":"param_tag_entries","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_param_tag_entries"},{"parameterName":"param_tag_entries","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_param_tag_entries"}]},"frame":{"showTitle":true,"title":"Tag Filter","showDescription":true,"description":"; separated list of optional k=v pairs (<ALL> is default for no filter) (i.e. keep_alive or keep_alive=True)"}}},"position":{"x":4,"y":4,"width":2,"height":2}},{"widget":{"name":"119e31ef","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_workspace_id","query":{"datasetName":"fb74d1e7","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"workspace_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_workspace_id","query":{"datasetName":"c767ac47","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"workspace_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_workspace_id","query":{"datasetName":"b7051bad","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"workspace_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"workspace_id","displayName":"workspace_id","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_workspace_id"},{"fieldName":"workspace_id","displayName":"workspace_id","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_workspace_id"},{"fieldName":"workspace_id","displayName":"workspace_id","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_workspace_id"}]},"frame":{"showTitle":true,"title":"Workspace Id"}}},"position":{"x":0,"y":4,"width":1,"height":2}},{"widget":{"name":"2def4662","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"IsDeletedCurrently","expression":"`IsDeletedCurrently`"},{"name":"warehouse_name_full","expression":"`warehouse_name_full`"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"warehouse_name_full","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Warehouse Name"},"y":{"fieldName":"sum(UsageDollars)","scale":{"type":"quantitative"},"displayName":"Usage Dollars"},"color":{"fieldName":"IsDeletedCurrently","scale":{"type":"categorical","mappings":[{"value":"Active","color":"#00A972"},{"value":"Deleted","color":"#0011ff"}]},"displayName":"Is Deleted"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Usage By Name"}}},"position":{"x":0,"y":28,"width":6,"height":10}},{"widget":{"name":"1d5ba444","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(UsageDollars)","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"style":{"bold":true,"color":"#00A972"},"displayName":"Sum of UsageDollars"}},"frame":{"showTitle":true,"title":"Total Usage Dollars In Period","showDescription":false,"description":"(DBUs)"}}},"position":{"x":0,"y":6,"width":2,"height":2}},{"widget":{"name":"8c3a9e82","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"countdistinct(warehouse_id)","expression":"COUNT(DISTINCT `warehouse_id`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(warehouse_id)","displayName":"Count of Unique warehouse_id"}},"frame":{"showTitle":true,"title":"Total Warehouse Count"}}},"position":{"x":4,"y":6,"width":2,"height":2}},{"widget":{"name":"fdc0e75d","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"warehouse_type","expression":"`warehouse_type`"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(UsageDollars)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":0}},"displayName":"DBUs"},"y":{"fieldName":"warehouse_type","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"axis":{"hideTitle":true},"displayName":"warehouse_type"},"color":{"fieldName":"warehouse_type","scale":{"type":"categorical","mappings":[{"value":"PRO","color":"#FFAB00"},{"value":"SERVERLESS","color":"#00A972"},{"value":"CLASSIC","color":"#919191"}]},"legend":{"title":"Warehouse Type"},"displayName":"Warehouse Type"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Usage By Type"},"mark":{"colors":["#0051a9","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":4,"y":8,"width":2,"height":6}},{"widget":{"name":"3b3dd75a","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbsql_discount","query":{"datasetName":"fc2d4844","parameters":[{"name":"dbsql_discount","keyword":"dbsql_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbsql_discount","query":{"datasetName":"871b75c8","parameters":[{"name":"dbsql_discount","keyword":"dbsql_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_dbsql_discount","query":{"datasetName":"fb74d1e7","parameters":[{"name":"dbsql_discount","keyword":"dbsql_discount"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"dbsql_discount","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbsql_discount"},{"parameterName":"dbsql_discount","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbsql_discount"},{"parameterName":"dbsql_discount","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_dbsql_discount"}]},"disallowAll":true,"frame":{"showTitle":true,"title":"DBSQL Discount %"}}},"position":{"x":5,"y":2,"width":1,"height":2}},{"widget":{"name":"41dfe7a8","queries":[{"name":"main_query","query":{"datasetName":"b7051bad","fields":[{"name":"warehouse_id","expression":"`warehouse_id`"},{"name":"workspace_id","expression":"`workspace_id`"},{"name":"account_id","expression":"`account_id`"},{"name":"warehouse_name","expression":"`warehouse_name`"},{"name":"warehouse_type","expression":"`warehouse_type`"},{"name":"warehouse_channel","expression":"`warehouse_channel`"},{"name":"warehouse_size","expression":"`warehouse_size`"},{"name":"min_clusters","expression":"`min_clusters`"},{"name":"max_clusters","expression":"`max_clusters`"},{"name":"auto_stop_minutes","expression":"`auto_stop_minutes`"},{"name":"tags","expression":"`tags`"},{"name":"change_time","expression":"`change_time`"},{"name":"delete_time","expression":"`delete_time`"},{"name":"IsDeletedCurrently","expression":"`IsDeletedCurrently`"},{"name":"IsMatched","expression":"`IsMatched`"},{"name":"custom_tag_key_value_pairs","expression":"`custom_tag_key_value_pairs`"},{"name":"url_helper","expression":"`url_helper`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"warehouse_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ url_helper }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"link","visible":true,"order":0,"title":"warehouse_id (link)","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_id"},{"fieldName":"workspace_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"workspace_id","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"workspace_id"},{"fieldName":"account_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":2,"title":"account_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"account_id"},{"fieldName":"warehouse_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"warehouse_name","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_name"},{"fieldName":"warehouse_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":4,"title":"warehouse_type","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_type"},{"fieldName":"warehouse_channel","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":5,"title":"warehouse_channel","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_channel"},{"fieldName":"warehouse_size","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":6,"title":"warehouse_size","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_size"},{"fieldName":"min_clusters","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":7,"title":"min_clusters","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"min_clusters"},{"fieldName":"max_clusters","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":8,"title":"max_clusters","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"max_clusters"},{"fieldName":"auto_stop_minutes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":9,"title":"auto_stop_minutes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"auto_stop_minutes"},{"fieldName":"tags","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":10,"title":"tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"tags"},{"fieldName":"change_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":11,"title":"change_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"change_time"},{"fieldName":"delete_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":12,"title":"delete_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"delete_time"},{"fieldName":"IsDeletedCurrently","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":13,"title":"IsDeletedCurrently","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"IsDeletedCurrently"},{"fieldName":"IsMatched","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":14,"title":"IsMatched","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"IsMatched"},{"fieldName":"custom_tag_key_value_pairs","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":16,"title":"custom_tag_key_value_pairs","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"custom_tag_key_value_pairs"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"url_helper","type":"string","displayAs":"string","order":15,"title":"url_helper","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"matched_tags_array","type":"complex","displayAs":"json","order":17,"title":"matched_tags_array","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":true,"frame":{"showTitle":true,"title":"Warehouses Current Snapshot Table"}}},"position":{"x":0,"y":38,"width":6,"height":6}},{"widget":{"name":"42900f13","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_warehouse_type","query":{"datasetName":"fb74d1e7","fields":[{"name":"warehouse_type","expression":"`warehouse_type`"},{"name":"warehouse_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_warehouse_type","query":{"datasetName":"b7051bad","fields":[{"name":"warehouse_type","expression":"`warehouse_type`"},{"name":"warehouse_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"warehouse_type","displayName":"warehouse_type","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_warehouse_type"},{"fieldName":"warehouse_type","displayName":"warehouse_type","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_warehouse_type"}]},"frame":{"showTitle":true,"title":"Warehouse Type"}}},"position":{"x":3,"y":4,"width":1,"height":2}},{"widget":{"name":"01bfcd99","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"workspace_id","expression":"`workspace_id`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Usage Date"},"y":{"fieldName":"sum(UsageDollars)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":0}},"displayName":"$ DBUs"},"color":{"fieldName":"workspace_id","scale":{"type":"categorical"},"legend":{"position":"bottom"},"displayName":"Workspace Id"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Usage Over Time By Workspace"},"mark":{"colors":["#0051a9","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":8,"width":4,"height":6}},{"widget":{"name":"4842040c","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa87f384d14d8824556fbcf1b9d56_toggle","query":{"datasetName":"74fc770a","fields":[{"name":"toggle","expression":"`toggle`"},{"name":"toggle_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_filter_by_tag_match","query":{"datasetName":"c767ac47","parameters":[{"name":"filter_by_tag_match","keyword":"filter_by_tag_match"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_filter_by_tag_match","query":{"datasetName":"fb74d1e7","parameters":[{"name":"filter_by_tag_match","keyword":"filter_by_tag_match"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_filter_by_tag_match","query":{"datasetName":"b7051bad","parameters":[{"name":"filter_by_tag_match","keyword":"filter_by_tag_match"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"filter_by_tag_match","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_filter_by_tag_match"},{"parameterName":"filter_by_tag_match","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_filter_by_tag_match"},{"parameterName":"filter_by_tag_match","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_filter_by_tag_match"},{"fieldName":"toggle","displayName":"toggle","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa87f384d14d8824556fbcf1b9d56_toggle"}]},"frame":{"showTitle":true,"title":"Tag Filter Unmatched Records","showDescription":false,"description":"; separated list of optional k=v pairs"}}},"position":{"x":2,"y":2,"width":1,"height":2}},{"widget":{"name":"630f18e8","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"IsDeletedCurrently","expression":"`IsDeletedCurrently`"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"},{"name":"custom_tag_key_value_pairs","expression":"`custom_tag_key_value_pairs`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(UsageDollars)","scale":{"type":"quantitative"},"displayName":"Usage Dollars"},"y":{"fieldName":"custom_tag_key_value_pairs","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Tag KV Pairs"},"color":{"fieldName":"IsDeletedCurrently","scale":{"type":"categorical","mappings":[{"value":"Active","color":"#00A972"},{"value":"Deleted","color":"#0011ff"}]},"displayName":"Is Deleted"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Usage By Search Tag KV Pairs"}}},"position":{"x":4,"y":14,"width":2,"height":7}},{"widget":{"name":"f6ce1a4b","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa87aa5821eb1bc29a127234396e9_toggle","query":{"datasetName":"3b078105","fields":[{"name":"toggle","expression":"`toggle`"},{"name":"toggle_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_case_sensitive","query":{"datasetName":"c767ac47","parameters":[{"name":"case_sensitive","keyword":"case_sensitive"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_case_sensitive","query":{"datasetName":"fb74d1e7","parameters":[{"name":"case_sensitive","keyword":"case_sensitive"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_case_sensitive","query":{"datasetName":"b7051bad","parameters":[{"name":"case_sensitive","keyword":"case_sensitive"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"toggle","displayName":"toggle","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa87aa5821eb1bc29a127234396e9_toggle"},{"parameterName":"case_sensitive","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c51616940e244c6543ee7c_case_sensitive"},{"parameterName":"case_sensitive","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_case_sensitive"},{"parameterName":"case_sensitive","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa758259f1555b1e43e06229197a6_case_sensitive"}]},"frame":{"showTitle":true,"title":"Tag Case Sensitivity","showDescription":false,"description":"; separated list of optional k=v pairs"}}},"position":{"x":3,"y":2,"width":1,"height":2}},{"widget":{"name":"3425717a","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"custom_tag_key_value_pairs","expression":"`custom_tag_key_value_pairs`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(UsageDollars)","expression":"SUM(`UsageDollars`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Usage Date"},"y":{"fieldName":"sum(UsageDollars)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":0}},"displayName":"$ DBUs"},"color":{"fieldName":"custom_tag_key_value_pairs","scale":{"type":"categorical","mappings":[{"value":"<MISMATCH>","color":"#AB4057"},{"value":"<UNTAGGED>","color":"#919191"}]},"legend":{"position":"bottom"},"displayName":"custom_tag_key_value_pairs"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Usage Over Time By Searched Tags"},"mark":{"colors":["#0051a9","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":14,"width":4,"height":7}},{"widget":{"name":"ae48d778","queries":[{"name":"main_query","query":{"datasetName":"fb74d1e7","fields":[{"name":"sum(DBUs)","expression":"SUM(`DBUs`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"sum(DBUs)","format":{"type":"number-plain","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"style":{"bold":true,"color":"#077A9D"},"displayName":"Sum of DBUs"}},"frame":{"showTitle":true,"title":"Total Usage DBUs In Period","showDescription":false,"description":"(DBUs)"}}},"position":{"x":2,"y":6,"width":2,"height":2}}]},{"name":"14197eb8","displayName":"Warehouse Scaling Patterns","layout":[{"widget":{"name":"fbc8b838","textbox_spec":"# Warehouse Scaling & Utilization Trends\n-----\nThis section simplifies trying to understand how well your warehouse scales as well as helps users project long term costs of spiky workloads more accurately. It pivots the real-time concurrency scaling chart and shows generally how much time and what % of time the warehouse was scaled up to each concurrency level. This can help guage scaling efficiency over time in production as well. \n\nNote: The warehouse settings (size, auto stop, min, and max clusters) represent the snapshot of the configuration of the warehouse at the select end time in that selected window. "},"position":{"x":0,"y":0,"width":6,"height":3}},{"widget":{"name":"ac901541","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"warehouse_auto_stop_min","expression":"`warehouse_auto_stop_min`"}],"disaggregated":true}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"warehouse_auto_stop_min","rowNumber":0,"displayName":"warehouse_auto_stop_min"}},"frame":{"showTitle":true,"title":"Auto Stop Minutes"}}},"position":{"x":3,"y":5,"width":1,"height":2}},{"widget":{"name":"cdaea905","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"min(warehouse_min_clusters)","expression":"MIN(`warehouse_min_clusters`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"min(warehouse_min_clusters)","displayName":"Minimum warehouse_min_clusters"}},"frame":{"showTitle":true,"title":"Min Clusters"}}},"position":{"x":1,"y":5,"width":1,"height":2}},{"widget":{"name":"52b73ee3","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"max(warehouse_max_clusters)","expression":"MAX(`warehouse_max_clusters`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"max(warehouse_max_clusters)","displayName":"Maximum warehouse_max_clusters"}},"frame":{"showTitle":true,"title":"Max Clusters"}}},"position":{"x":2,"y":5,"width":1,"height":2}},{"widget":{"name":"9c10b079","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"warehouse_size","expression":"`warehouse_size`"}],"disaggregated":true}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"warehouse_size","rowNumber":0,"displayName":"warehouse_size"}},"frame":{"showTitle":true,"title":"Size"}}},"position":{"x":0,"y":5,"width":1,"height":2}},{"widget":{"name":"594896ea","queries":[{"name":"main_query","query":{"datasetName":"94dbe86a","fields":[{"name":"max(utilization_proportion)","expression":"MAX(`utilization_proportion`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"max(utilization_proportion)","format":{"type":"number-percent","decimalPlaces":{"type":"max","places":0}},"style":{"rules":[{"condition":{"operator":"<","operand":{"type":"data-value","value":"0.15"}},"color":"#AB4057"},{"condition":{"operator":">=","operand":{"type":"data-value","value":"0.35"}},"color":"#00A972"}]},"displayName":"Maximum utilization_proportion"}},"frame":{"showTitle":true,"title":"Warehouse Utilization","showDescription":true,"description":"% time doing work"}}},"position":{"x":4,"y":3,"width":1,"height":2}},{"widget":{"name":"de0ae1d5","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"NumberOfClustersOn","expression":"`NumberOfClustersOn`"},{"name":"countdistinct(event_minute)","expression":"COUNT(DISTINCT `event_minute`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"NumberOfClustersOn","scale":{"type":"categorical"},"displayName":"# Concurrent Clusters"},"y":{"fieldName":"countdistinct(event_minute)","scale":{"type":"quantitative"},"displayName":"# Minutes On Cluster N"},"color":{"fieldName":"NumberOfClustersOn","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"# Clusters"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Scaling Pattern Histogram"}}},"position":{"x":0,"y":7,"width":4,"height":7}},{"widget":{"name":"45939b84","queries":[{"name":"main_query","query":{"datasetName":"e139c435","fields":[{"name":"NumberOfClustersOn","expression":"`NumberOfClustersOn`"},{"name":"time_key","expression":"`time_key`"},{"name":"sum(total_minutes)","expression":"SUM(`total_minutes`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"displayName":"Time"},"y":{"fieldName":"sum(total_minutes)","scale":{"type":"quantitative"},"displayName":"# Minutes On Cluster N"},"color":{"fieldName":"NumberOfClustersOn","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"# Clusters"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Scaling Summary Over Time"}}},"position":{"x":0,"y":14,"width":6,"height":8}},{"widget":{"name":"80fae142","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"warehouse_channel","expression":"`warehouse_channel`"}],"disaggregated":true}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"warehouse_channel","style":{"fontSize":20},"rowNumber":0,"displayName":"warehouse_channel"}},"frame":{"showTitle":true,"title":"Channel"}}},"position":{"x":5,"y":3,"width":1,"height":2}},{"widget":{"name":"8fa0119c","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_warehouse_name","query":{"datasetName":"304214bb","fields":[{"name":"warehouse_name","expression":"`warehouse_name`"},{"name":"warehouse_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137bd1bf8a5372de6a5de3cc5_warehouse_name","query":{"datasetName":"36bb7aba","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef85b7273b1a0088f37ab14f1e2133_warehouse_name","query":{"datasetName":"e139c435","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efab5e87b710e0ac2ec59bbead964f_warehouse_name","query":{"datasetName":"94dbe86a","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efaab24e431458b8b82786e560d412_warehouse_name","query":{"datasetName":"12744d7e","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"warehouse_name","displayName":"warehouse_name","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137bd1bf8a5372de6a5de3cc5_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef85b7273b1a0088f37ab14f1e2133_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efab5e87b710e0ac2ec59bbead964f_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efaab24e431458b8b82786e560d412_warehouse_name"}]},"frame":{"showTitle":true,"title":"Warehouse"}}},"position":{"x":2,"y":3,"width":1,"height":2}},{"widget":{"name":"5bebb262","queries":[{"name":"main_query","query":{"datasetName":"36bb7aba","fields":[{"name":"countdistinct(event_minute)","expression":"COUNT(DISTINCT `event_minute`)"},{"name":"NumberOfClustersOn","expression":"`NumberOfClustersOn`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"countdistinct(event_minute)","scale":{"type":"quantitative"},"displayName":"% time spent scaled at cluster N"},"color":{"fieldName":"NumberOfClustersOn","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"# Clusters"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Warehouse Scaling Pattern Histogram"}}},"position":{"x":4,"y":5,"width":2,"height":9}},{"widget":{"name":"2bd52353","queries":[{"name":"main_query","query":{"datasetName":"12744d7e","fields":[{"name":"utilization_flag","expression":"`utilization_flag`"},{"name":"time_key","expression":"`time_key`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"axis":{"title":"Time"},"displayName":"# Concurrent Clusters"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"% time spent"},"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"# Minutes On Cluster N"},"color":{"fieldName":"utilization_flag","scale":{"type":"categorical","mappings":[{"value":"OFF","color":"#077A9D"},{"value":"ON_IDLE","color":"#919191"}]},"legend":{"position":"bottom"},"displayName":"Is Warehouse Utilized?"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Warehouse Utilization Over Time","showDescription":false,"description":""},"mark":{"layout":"percent-stack"}}},"position":{"x":0,"y":22,"width":6,"height":10}},{"widget":{"name":"fd09f3d4","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_time_range","query":{"datasetName":"304214bb","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137bd1bf8a5372de6a5de3cc5_time_range","query":{"datasetName":"36bb7aba","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_time_range","query":{"datasetName":"fb74d1e7","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef85b7273b1a0088f37ab14f1e2133_time_range","query":{"datasetName":"e139c435","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efab5e87b710e0ac2ec59bbead964f_time_range","query":{"datasetName":"94dbe86a","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efaab24e431458b8b82786e560d412_time_range","query":{"datasetName":"12744d7e","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137bd1bf8a5372de6a5de3cc5_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c9167c8a5bbf57470908ad_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef85b7273b1a0088f37ab14f1e2133_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efab5e87b710e0ac2ec59bbead964f_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efaab24e431458b8b82786e560d412_time_range"}]},"frame":{"showTitle":true,"title":"Time Range"}}},"position":{"x":0,"y":3,"width":2,"height":2}},{"widget":{"name":"cbb19029","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efed783dd61b9ab041fc65e1ee3c62_time_key","query":{"datasetName":"6d9636e5","fields":[{"name":"time_key","expression":"`time_key`"},{"name":"time_key_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137bd1bf8a5372de6a5de3cc5_param_time_key","query":{"datasetName":"36bb7aba","parameters":[{"name":"param_time_key","keyword":"param_time_key"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef85b7273b1a0088f37ab14f1e2133_param_time_key","query":{"datasetName":"e139c435","parameters":[{"name":"param_time_key","keyword":"param_time_key"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efaab24e431458b8b82786e560d412_param_time_key","query":{"datasetName":"12744d7e","parameters":[{"name":"param_time_key","keyword":"param_time_key"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"time_key","displayName":"time_key","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efed783dd61b9ab041fc65e1ee3c62_time_key"},{"parameterName":"param_time_key","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137bd1bf8a5372de6a5de3cc5_param_time_key"},{"parameterName":"param_time_key","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef85b7273b1a0088f37ab14f1e2133_param_time_key"},{"parameterName":"param_time_key","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efaab24e431458b8b82786e560d412_param_time_key"}]},"selection":{"defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Day"}]}}},"disallowAll":true,"frame":{"showTitle":true,"title":"Time Grain"}}},"position":{"x":3,"y":3,"width":1,"height":2}}]},{"name":"66ebac80","displayName":"Performance Advisor","layout":[{"widget":{"name":"bdf60523","textbox_spec":"# Query Performance Analysis\n-----\nThis section helps dive into warehouse performance to understand how well the warehouse is performing against SLAs, identifying bottlenecks, as well as queries that are taking up the majority of the resources.\n\n-----\n## Key Performance KPIs\nThis section tracks 4 core KPIS: \n\n1. Query Runtime (P50, 95,99) - The total runtime (wall clock of a query) - including queueing time\n2. Queuing Count (P50,95,99) & Time - The maximum amount of queries in the queue at a given window of time.\n3. Queries Spilling to Disk & GBs spilled to disk (P50, 95, 99) - This is the frequency and volume of data spilled to disk to help track warehouse size limits to a query. \n4. GBs Read & Written - This is the amount of data read and written by queries (P50, 95, 99, 100). This is a metric to help understand directionally what cluster size should be chosen. "},"position":{"x":0,"y":0,"width":6,"height":6}},{"widget":{"name":"fa43aabf","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_warehouse_name","query":{"datasetName":"304214bb","fields":[{"name":"warehouse_name","expression":"`warehouse_name`"},{"name":"warehouse_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_warehouse_name","query":{"datasetName":"fc2d4844","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137cd16139ed6ea8efc888a9e_warehouse_name","query":{"datasetName":"547c0662","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"warehouse_name","displayName":"warehouse_name","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137cd16139ed6ea8efc888a9e_warehouse_name"}]},"frame":{"showTitle":true,"title":"Warehouse(s)"}}},"position":{"x":2,"y":6,"width":2,"height":2}},{"widget":{"name":"5a046324","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_time_range","query":{"datasetName":"fc2d4844","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_time_range","query":{"datasetName":"304214bb","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137cd16139ed6ea8efc888a9e_time_range","query":{"datasetName":"547c0662","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_time_range"},{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137cd16139ed6ea8efc888a9e_time_range"}]},"frame":{"showTitle":true,"title":"Time Range"}}},"position":{"x":0,"y":6,"width":2,"height":2}},{"widget":{"name":"aaa4f759","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_QueryRuntimeSeconds","query":{"datasetName":"fc2d4844","fields":[{"name":"min(QueryRuntimeSeconds)","expression":"MIN(`QueryRuntimeSeconds`)"},{"name":"max(QueryRuntimeSeconds)","expression":"MAX(`QueryRuntimeSeconds`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"range-slider","encodings":{"fields":[{"fieldName":"QueryRuntimeSeconds","displayName":"QueryRuntimeSeconds","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_QueryRuntimeSeconds"}]},"frame":{"showTitle":true,"title":"Query runtime (s)"}}},"position":{"x":4,"y":6,"width":1,"height":2}},{"widget":{"name":"74231c34","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_executed_by","query":{"datasetName":"fc2d4844","fields":[{"name":"executed_by","expression":"`executed_by`"},{"name":"executed_by_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"executed_by","displayName":"executed_by","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_executed_by"}]},"frame":{"showTitle":true,"title":"Executed By"}}},"position":{"x":2,"y":8,"width":1,"height":2}},{"widget":{"name":"96beb16a","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_statement_type","query":{"datasetName":"fc2d4844","fields":[{"name":"statement_type","expression":"`statement_type`"},{"name":"statement_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"statement_type","displayName":"statement_type","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_statement_type"}]},"frame":{"showTitle":true,"title":"Statement Type"}}},"position":{"x":3,"y":8,"width":1,"height":2}},{"widget":{"name":"bc678df0","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_QueryTag","query":{"datasetName":"fc2d4844","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"QueryTag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"QueryTag","displayName":"QueryTag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_QueryTag"}]},"frame":{"showTitle":true,"title":"Query Tag (custom)"}}},"position":{"x":5,"y":6,"width":1,"height":2}},{"widget":{"name":"9ac80adb","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbt_target_name","query":{"datasetName":"fc2d4844","fields":[{"name":"dbt_target_name","expression":"`dbt_target_name`"},{"name":"dbt_target_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"dbt_target_name","displayName":"dbt_target_name","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbt_target_name"}]},"frame":{"showTitle":true,"title":"DBT Target"}}},"position":{"x":4,"y":8,"width":1,"height":2}},{"widget":{"name":"141f0fa9","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_query_source_id","query":{"datasetName":"fc2d4844","fields":[{"name":"query_source_id","expression":"`query_source_id`"},{"name":"query_source_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"query_source_id","displayName":"query_source_id","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_query_source_id"}]},"frame":{"showTitle":true,"title":"Query Source Id"}}},"position":{"x":1,"y":8,"width":1,"height":2}},{"widget":{"name":"9ff99880","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_query_source_type","query":{"datasetName":"fc2d4844","fields":[{"name":"query_source_type","expression":"`query_source_type`"},{"name":"query_source_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"query_source_type","displayName":"query_source_type","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_query_source_type"}]},"frame":{"showTitle":true,"title":"Query Source"}}},"position":{"x":0,"y":8,"width":1,"height":2}},{"widget":{"name":"4389a272","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(QueryRuntimeSeconds, percentage=0_99)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.99)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_95)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.95)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_95)","displayName":"95th Percentile of QueryRuntimeSeconds"},"target":{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_99)","displayName":"99th Percentile of QueryRuntimeSeconds"}},"frame":{"showTitle":true,"title":"Query Runtime (s) - P95","showDescription":true,"description":"P99"}}},"position":{"x":0,"y":11,"width":1,"height":2}},{"widget":{"name":"a931e051","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"median(QueryRuntimeSeconds)","expression":"MEDIAN(`QueryRuntimeSeconds`)"},{"name":"avg(QueryRuntimeSeconds)","expression":"AVG(`QueryRuntimeSeconds`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(QueryRuntimeSeconds)","displayName":"Average QueryRuntimeSeconds"},"target":{"fieldName":"median(QueryRuntimeSeconds)","displayName":"Median of QueryRuntimeSeconds"}},"frame":{"showTitle":true,"title":"Query Runtime (s) Avg","showDescription":true,"description":"Median"}}},"position":{"x":1,"y":11,"width":1,"height":2}},{"widget":{"name":"e1b5d158","queries":[{"name":"main_query","query":{"datasetName":"547c0662","fields":[{"name":"percentile(PeakQueued, percentage=0_5)","expression":"PERCENTILE(`PeakQueued`, 0.5)"},{"name":"percentile(PeakQueued, percentage=0_95)","expression":"PERCENTILE(`PeakQueued`, 0.95)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"percentile(PeakQueued, percentage=0_95)","displayName":"95th Percentile of PeakQueued"},"target":{"fieldName":"percentile(PeakQueued, percentage=0_5)","displayName":"50th Percentile of PeakQueued"}},"frame":{"showTitle":true,"title":"Peak Queued (#) - P95","showDescription":true,"description":"P50"}}},"position":{"x":0,"y":13,"width":1,"height":2}},{"widget":{"name":"cb7b0c57","queries":[{"name":"main_query","query":{"datasetName":"547c0662","fields":[{"name":"percentile(PeakRunning, percentage=0_5)","expression":"PERCENTILE(`PeakRunning`, 0.5)"},{"name":"percentile(PeakRunning, percentage=0_95)","expression":"PERCENTILE(`PeakRunning`, 0.95)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"percentile(PeakRunning, percentage=0_95)","displayName":"95th Percentile of PeakRunning"},"target":{"fieldName":"percentile(PeakRunning, percentage=0_5)","displayName":"50th Percentile of PeakRunning"}},"frame":{"showTitle":true,"title":"Peak Running (#) - P95","showDescription":true,"description":"P50"}}},"position":{"x":1,"y":13,"width":1,"height":2}},{"widget":{"name":"3a665f55","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(QueryRuntimeSeconds, percentage=1)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 1)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"percentile(QueryRuntimeSeconds, percentage=1)","displayName":"100th Percentile of QueryRuntimeSeconds"}},"frame":{"showTitle":true,"title":"Query Runtime (s)- Max","showDescription":false,"description":""}}},"position":{"x":2,"y":11,"width":1,"height":2}},{"widget":{"name":"14790ce4","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"countdistinct(executed_by)","expression":"COUNT(DISTINCT `executed_by`)"},{"name":"countdistinct(statement_id)","expression":"COUNT(DISTINCT `statement_id`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"countdistinct(statement_id)","displayName":"Count of Unique statement_id"},"target":{"fieldName":"countdistinct(executed_by)","displayName":"Count of Unique executed_by"}},"frame":{"showTitle":true,"title":"Query Count","showDescription":true,"description":"User Count"}}},"position":{"x":3,"y":11,"width":1,"height":2}},{"widget":{"name":"15b96395","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(QueueQueryTime, percentage=0_95)","expression":"PERCENTILE(`QueueQueryTime`, 0.95)"},{"name":"median(QueueQueryTime)","expression":"MEDIAN(`QueueQueryTime`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"median(QueueQueryTime)","displayName":"Median of QueueQueryTime"},"target":{"fieldName":"percentile(QueueQueryTime, percentage=0_95)","displayName":"95th Percentile of QueueQueryTime"}},"frame":{"showTitle":true,"title":"Queue Time (s) - P50","showDescription":true,"description":"P95"}}},"position":{"x":2,"y":13,"width":1,"height":2}},{"widget":{"name":"5a510b1c","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(ProportionQueueTime, percentage=0_95)","expression":"PERCENTILE(`ProportionQueueTime`, 0.95)"},{"name":"median(ProportionQueueTime)","expression":"MEDIAN(`ProportionQueueTime`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"median(ProportionQueueTime)","displayName":"Median of ProportionQueueTime"},"target":{"fieldName":"percentile(ProportionQueueTime, percentage=0_95)","displayName":"95th Percentile of ProportionQueueTime"}},"frame":{"showTitle":true,"title":"% Time in Queue - P50","showDescription":true,"description":"P95"}}},"position":{"x":3,"y":13,"width":1,"height":2}},{"widget":{"name":"a4a1cbeb","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"measure(QueriesPerMinute)","expression":"MEASURE(`QueriesPerMinute`)"},{"name":"measure(QueriesPerSecond)","expression":"MEASURE(`QueriesPerSecond`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"measure(QueriesPerSecond)","format":{"type":"number-plain","abbreviation":"none","decimalPlaces":{"type":"exact","places":4}},"displayName":"QueriesPerSecond"},"target":{"fieldName":"measure(QueriesPerMinute)","displayName":"QueriesPerMinute"}},"frame":{"showTitle":true,"title":"QPS","showDescription":true,"description":"/QPM"}}},"position":{"x":4,"y":11,"width":1,"height":2}},{"widget":{"name":"17f223c2","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(ReadDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.99)"},{"name":"avg(ReadDataAmountInGB)","expression":"AVG(`ReadDataAmountInGB`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(ReadDataAmountInGB)","format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"exact","places":2}},"displayName":"Average ReadDataAmountInGB"},"target":{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_99)","displayName":"99th Percentile of ReadDataAmountInGB"}},"frame":{"showTitle":true,"title":"GBs Read - Avg","showDescription":true,"description":"P99"}}},"position":{"x":4,"y":13,"width":1,"height":2}},{"widget":{"name":"887a33ac","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(WrittenDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`WrittenDataAmountInGB`, 0.99)"},{"name":"avg(WrittenDataAmountInGB)","expression":"AVG(`WrittenDataAmountInGB`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"avg(WrittenDataAmountInGB)","format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"exact","places":2}},"displayName":"Average WrittenDataAmountInGB"},"target":{"fieldName":"percentile(WrittenDataAmountInGB, percentage=0_99)","displayName":"99th Percentile of WrittenDataAmountInGB"}},"frame":{"showTitle":true,"title":"GBs Written - Avg","showDescription":true,"description":"P99"}}},"position":{"x":5,"y":13,"width":1,"height":2}},{"widget":{"name":"26e16c4c","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(SpilledDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`SpilledDataAmountInGB`, 0.99)"},{"name":"measure(SpillProportion)","expression":"MEASURE(`SpillProportion`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"counter","encodings":{"value":{"fieldName":"measure(SpillProportion)","format":{"type":"number-percent","decimalPlaces":{"type":"max","places":2}},"displayName":"SpillProportion"},"target":{"fieldName":"percentile(SpilledDataAmountInGB, percentage=0_99)","displayName":"99th Percentile of SpilledDataAmountInGB"}},"frame":{"showTitle":true,"title":"Spill Rate Frequency","showDescription":true,"description":"P99 of GBs Spilled"}}},"position":{"x":5,"y":11,"width":1,"height":2}},{"widget":{"name":"3a82ea8c","textbox_spec":"## Summary Metrics\n-----"},"position":{"x":0,"y":10,"width":6,"height":1}},{"widget":{"name":"c8357ed3","textbox_spec":"## Query Metrics Charts\n-----"},"position":{"x":0,"y":15,"width":6,"height":1}},{"widget":{"name":"fccd3a3b","textbox_spec":"## Health Trends\n-----"},"position":{"x":0,"y":30,"width":6,"height":1}},{"widget":{"name":"c970cf94","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"group_key","expression":"`group_key`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"count(*)","scale":{"type":"quantitative"},"axis":{"title":"Queries"},"displayName":"Queries"},"y":{"fieldName":"group_key","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"axis":{"title":"Query Source","hideTitle":true},"displayName":"Query Source"},"color":{"fieldName":"count(*)","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"legend":{"hide":true},"displayName":"Count of Records"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Queries By Group Key"}}},"position":{"x":0,"y":16,"width":2,"height":14}},{"widget":{"name":"a9963562","textbox_spec":"## Warehouse Performance - Query Runtime SLAs\nQuery runtime helps identify if your warehouse is meeting your SLAs. The runtime is generally controlled by the size of the warehouse but also influenced by how long queries are spent queued. So if your queries are running slower than your desired SLA, try increasing the warehouse T-shirt size and using the below visual to see if queries are queuing too often.\n\n##### Best Practices: \nThe below visuals show overall P95, 99, as well the as P99/95 for each segment of time within the overall selected window. To use this, focus on the overall SLA. If you are NOT meeting your SLA, then you either need to make the warehouse larger or increase concurrency. If your queries runtimes are taking too long and queries are NOT spending an extensive amount of time queuing, then you likely need a bigger warehouse to run the query faster. If your queuing is high, but your average query runtimes are fine, then you likely need to increase concurrency. Lastly, you can also monitor your query spilling (both frequency and amount) to also use as a clear indicator that your warehouse can be larger to get better performance.  If you are meeting your SLA - you can either do nothing or even make the warehouse smaller or concurrency scale less. If you are NOT meeting your SLA"},"position":{"x":0,"y":31,"width":6,"height":4}},{"widget":{"name":"a1ffed9e","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"clean_warehouse_name","expression":"`clean_warehouse_name`"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_5)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.5)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_95)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.95)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_99)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.99)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"clean_warehouse_name","scale":{"type":"categorical"},"displayName":"Warehouse"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_5)","displayName":"P50 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_95)","displayName":"P95 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_99)","displayName":"P99 Runtime"}],"axis":{"title":"Runtime (s)"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Query Runtime By Warehouse"},"mark":{"colors":["#00A972","#FFAB00","#FF3621","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":35,"width":5,"height":7}},{"widget":{"name":"e007a8d4","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(QueryRuntimeSeconds, percentage=0_5)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.5)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_75)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.75)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_95)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.95)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_99)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.99)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_5)","displayName":"P50 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_75)","displayName":"P75 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_95)","displayName":"P95 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_99)","displayName":"P99 Runtime"}],"axis":{"title":"Runtime (s)"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Query Runtime (s)"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":5,"y":35,"width":1,"height":7}},{"widget":{"name":"740035b1","textbox_spec":"## Warehouse Performance - Queuing Metrics\nThere are 3 key metrics under this section: peak queued, peak running, and % of a query life spent in the queue. \nPeak Queuing shows how many queries get queued before running in a given time window. The MAX peak queued queries in a time window helps show how much more concurrency scaling the warehouse might need to not require queuing. Peak Running shows how many queries are running concurrently at a point in time. % of query life spent in queue shows how much of a query runtime is wasted in the queue - this is a good metric to look at because it normalizes for short and long running queries. \n##### Best Practices: \nJust because there is queuing, does not mean you need to scale up your warehouse. Always scale your warehouses based on the SLA metrics first. If queries are being queued and you still meet your SLA, there is no value in increases concurrency scaling of the warehouse. "},"position":{"x":0,"y":49,"width":6,"height":4}},{"widget":{"name":"d7ed1688","queries":[{"name":"main_query","query":{"datasetName":"547c0662","fields":[{"name":"time_key","expression":"`time_key`"},{"name":"max(PeakQueued)","expression":"MAX(`PeakQueued`)"},{"name":"max(PeakRunning)","expression":"MAX(`PeakRunning`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"axis":{"hideTitle":true},"displayName":"time_key"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"max(PeakQueued)","displayName":"Peak Queued"},{"fieldName":"max(PeakRunning)","displayName":"Peak Running"}]},"label":{"show":true}},"frame":{"showTitle":true,"title":"Peak Queued & Running Over Time"},"mark":{"colors":["#919191","#00A972","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":66,"width":6,"height":7}},{"widget":{"name":"c21544fd","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(QueueQueryTime, percentage=0_5)","expression":"PERCENTILE(`QueueQueryTime`, 0.5)"},{"name":"percentile(QueueQueryTime, percentage=0_75)","expression":"PERCENTILE(`QueueQueryTime`, 0.75)"},{"name":"percentile(QueueQueryTime, percentage=0_95)","expression":"PERCENTILE(`QueueQueryTime`, 0.95)"},{"name":"percentile(QueueQueryTime, percentage=0_99)","expression":"PERCENTILE(`QueueQueryTime`, 0.99)"},{"name":"percentile(QueueQueryTime, percentage=1)","expression":"PERCENTILE(`QueueQueryTime`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(QueueQueryTime, percentage=0_5)","displayName":"P50 Queue Time"},{"fieldName":"percentile(QueueQueryTime, percentage=0_75)","displayName":"P75 Queue Time"},{"fieldName":"percentile(QueueQueryTime, percentage=0_95)","displayName":"P95 Queue Time"},{"fieldName":"percentile(QueueQueryTime, percentage=0_99)","displayName":"P99 Queue Time"},{"fieldName":"percentile(QueueQueryTime, percentage=1)","displayName":"P100 Queue Time"}]},"label":{"show":true}},"frame":{"showTitle":true,"title":"Query Queue Time (s)"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":5,"y":53,"width":1,"height":6}},{"widget":{"name":"4a68857c","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"rounded_proportion_queue_time","expression":"`rounded_proportion_queue_time`"},{"name":"bin(rounded_proportion_queue_time, binWidth=0_1)","expression":"BIN_FLOOR(`rounded_proportion_queue_time`, 0.1)"},{"name":"countdistinct(statement_id)","expression":"COUNT(DISTINCT `statement_id`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"histogram","encodings":{"x":{"fieldName":"bin(rounded_proportion_queue_time, binWidth=0_1)","scale":{"type":"quantitative"},"displayName":"% Queue Time"},"y":{"fieldName":"countdistinct(statement_id)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"rounded_proportion_queue_time","scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"greenblue"}},"displayName":"% Queue Time"},"label":{"show":false}},"mark":{"layout":"stack"},"frame":{"showTitle":true,"title":"% of Query Spent in Queue Distribution"}}},"position":{"x":0,"y":73,"width":6,"height":6}},{"widget":{"name":"c41b12c8","queries":[{"name":"main_query","query":{"datasetName":"547c0662","fields":[{"name":"percentile(PeakQueued, percentage=0_5)","expression":"PERCENTILE(`PeakQueued`, 0.5)"},{"name":"percentile(PeakQueued, percentage=0_75)","expression":"PERCENTILE(`PeakQueued`, 0.75)"},{"name":"percentile(PeakQueued, percentage=0_95)","expression":"PERCENTILE(`PeakQueued`, 0.95)"},{"name":"percentile(PeakQueued, percentage=0_99)","expression":"PERCENTILE(`PeakQueued`, 0.99)"},{"name":"percentile(PeakQueued, percentage=1)","expression":"PERCENTILE(`PeakQueued`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(PeakQueued, percentage=0_5)","displayName":"P50 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=0_75)","displayName":"P75 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=0_95)","displayName":"P95 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=0_99)","displayName":"P99 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=1)","displayName":"P100 # Queued"}],"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"axis":{"title":"# Queued"}},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Peak Queued Count"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":53,"width":2,"height":6}},{"widget":{"name":"f8e44dcd","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(ProportionQueueTime, percentage=0_5)","expression":"PERCENTILE(`ProportionQueueTime`, 0.5)"},{"name":"percentile(ProportionQueueTime, percentage=0_75)","expression":"PERCENTILE(`ProportionQueueTime`, 0.75)"},{"name":"percentile(ProportionQueueTime, percentage=0_95)","expression":"PERCENTILE(`ProportionQueueTime`, 0.95)"},{"name":"percentile(ProportionQueueTime, percentage=0_99)","expression":"PERCENTILE(`ProportionQueueTime`, 0.99)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(ProportionQueueTime, percentage=0_5)","displayName":"P50 % Queued Time"},{"fieldName":"percentile(ProportionQueueTime, percentage=0_75)","displayName":"P75 % Queued Time"},{"fieldName":"percentile(ProportionQueueTime, percentage=0_95)","displayName":"P95 % Queued Time"},{"fieldName":"percentile(ProportionQueueTime, percentage=0_99)","displayName":"P99 % Queued Time"}],"format":{"type":"number-percent","decimalPlaces":{"type":"max","places":0}}},"label":{"show":true}},"frame":{"showTitle":true,"title":"% Queue Time"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":4,"y":53,"width":1,"height":6}},{"widget":{"name":"5ff09322","queries":[{"name":"main_query","query":{"datasetName":"547c0662","fields":[{"name":"percentile(PeakRunning, percentage=0_5)","expression":"PERCENTILE(`PeakRunning`, 0.5)"},{"name":"percentile(PeakRunning, percentage=0_75)","expression":"PERCENTILE(`PeakRunning`, 0.75)"},{"name":"percentile(PeakRunning, percentage=0_95)","expression":"PERCENTILE(`PeakRunning`, 0.95)"},{"name":"percentile(PeakRunning, percentage=0_99)","expression":"PERCENTILE(`PeakRunning`, 0.99)"},{"name":"percentile(PeakRunning, percentage=1)","expression":"PERCENTILE(`PeakRunning`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(PeakRunning, percentage=0_5)","displayName":"P50 # Running"},{"fieldName":"percentile(PeakRunning, percentage=0_75)","displayName":"P75 # Running"},{"fieldName":"percentile(PeakRunning, percentage=0_95)","displayName":"P95 # Running"},{"fieldName":"percentile(PeakRunning, percentage=0_99)","displayName":"P99 # Running"},{"fieldName":"percentile(PeakRunning, percentage=1)","displayName":"P100 # Running"}],"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"axis":{"title":"# Running"}},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Peak Running Count"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":2,"y":53,"width":2,"height":6}},{"widget":{"name":"8735f268","textbox_spec":"## Warehouse Performance - Data Scanning & Disk Spilling Metrics\nData Scanned helps understand how much data queries are reading - this is a decent proxy for warehouse size. Disk Spilling (both frequency and amount) is a clear metrics that helps track the amount of available memory in a cluster relative to the amount of data that needs to be processed in a given query.\n\n##### Best Practices: \nSpilling to disk occasionally is completely fine, but when this happens consistently and the data volume of spilling is high (many many GBs/TBs), then it becomes highly likely that a larger warehouse is more performant AND cost effective.  When the % of queries spilling to disk increases, that is a clear sign the warehouse should be larger. "},"position":{"x":0,"y":79,"width":6,"height":3}},{"widget":{"name":"ccc3908d","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"time_key","expression":"`time_key`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"displayName":"Query Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HasSpillFlag","scale":{"type":"categorical","mappings":[{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"}]},"displayName":"Has Spill"}},"frame":{"showTitle":true,"title":"% Queries Spilling to Disk Over Time"},"mark":{"layout":"percent-stack"}}},"position":{"x":0,"y":82,"width":5,"height":6}},{"widget":{"name":"d704fa58","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HasSpillFlag","scale":{"type":"categorical","mappings":[{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"}]},"displayName":"Has Spill"},"label":{"show":true}},"frame":{"showTitle":true,"title":"% Queries Spilling to Disk"},"mark":{"layout":"percent-stack"}}},"position":{"x":5,"y":82,"width":1,"height":6}},{"widget":{"name":"0ac8c275","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(SpilledDataAmountInGB, percentage=0_5)","expression":"PERCENTILE(`SpilledDataAmountInGB`, 0.5)"},{"name":"percentile(SpilledDataAmountInGB, percentage=0_75)","expression":"PERCENTILE(`SpilledDataAmountInGB`, 0.75)"},{"name":"percentile(SpilledDataAmountInGB, percentage=0_95)","expression":"PERCENTILE(`SpilledDataAmountInGB`, 0.95)"},{"name":"percentile(SpilledDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`SpilledDataAmountInGB`, 0.99)"},{"name":"percentile(SpilledDataAmountInGB, percentage=1)","expression":"PERCENTILE(`SpilledDataAmountInGB`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(SpilledDataAmountInGB, percentage=0_5)","displayName":"P50 GB Spilled"},{"fieldName":"percentile(SpilledDataAmountInGB, percentage=0_75)","displayName":"P75 GB Spilled"},{"fieldName":"percentile(SpilledDataAmountInGB, percentage=0_95)","displayName":"P95 GB Spilled"},{"fieldName":"percentile(SpilledDataAmountInGB, percentage=0_99)","displayName":"P99 GB Spilled"},{"fieldName":"percentile(SpilledDataAmountInGB, percentage=1)","displayName":"P100 GB Spilled"}]},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Disk Spill GB Distribution"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":4,"y":88,"width":2,"height":6}},{"widget":{"name":"ebd6a9bf","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(WrittenDataAmountInGB, percentage=0_5)","expression":"PERCENTILE(`WrittenDataAmountInGB`, 0.5)"},{"name":"percentile(WrittenDataAmountInGB, percentage=0_75)","expression":"PERCENTILE(`WrittenDataAmountInGB`, 0.75)"},{"name":"percentile(WrittenDataAmountInGB, percentage=0_95)","expression":"PERCENTILE(`WrittenDataAmountInGB`, 0.95)"},{"name":"percentile(WrittenDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`WrittenDataAmountInGB`, 0.99)"},{"name":"percentile(WrittenDataAmountInGB, percentage=1)","expression":"PERCENTILE(`WrittenDataAmountInGB`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(WrittenDataAmountInGB, percentage=0_5)","displayName":"P50 GB Written"},{"fieldName":"percentile(WrittenDataAmountInGB, percentage=0_75)","displayName":"P75 GB Written"},{"fieldName":"percentile(WrittenDataAmountInGB, percentage=0_95)","displayName":"P95 GB Written"},{"fieldName":"percentile(WrittenDataAmountInGB, percentage=0_99)","displayName":"P99 GB Written"},{"fieldName":"percentile(WrittenDataAmountInGB, percentage=1)","displayName":"P100 GB Written"}]},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Written GB Distribution"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":2,"y":88,"width":2,"height":6}},{"widget":{"name":"003bda1c","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"percentile(ReadDataAmountInGB, percentage=0_5)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.5)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_75)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.75)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_95)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.95)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.99)"},{"name":"percentile(ReadDataAmountInGB, percentage=1)","expression":"PERCENTILE(`ReadDataAmountInGB`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_5)","displayName":"P50 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_75)","displayName":"P75 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_95)","displayName":"P95 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_99)","displayName":"P99 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=1)","displayName":"P100 GB Read"}]},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Read GB Distribution"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":88,"width":2,"height":6}},{"widget":{"name":"a81526a0","textbox_spec":"### Query Performance Detail\nThis section drills into details of identifying root causes of poorly performing warehouses down to the query bottlenecks such as spill, high data volume, and long running queries. \n\n-----"},"position":{"x":0,"y":108,"width":6,"height":2}},{"widget":{"name":"a7618d15","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_LongRunningQueryFlag","query":{"datasetName":"fc2d4844","fields":[{"name":"LongRunningQueryFlag","expression":"`LongRunningQueryFlag`"},{"name":"LongRunningQueryFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"LongRunningQueryFlag","displayName":"LongRunningQueryFlag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_LongRunningQueryFlag"}]},"frame":{"showTitle":true,"title":"Is Long Running"}}},"position":{"x":0,"y":110,"width":1,"height":2}},{"widget":{"name":"bc5d626c","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HasSpillFlag","query":{"datasetName":"fc2d4844","fields":[{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"HasSpillFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"HasSpillFlag","displayName":"HasSpillFlag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HasSpillFlag"}]},"frame":{"showTitle":true,"title":"Has Spill"}}},"position":{"x":1,"y":110,"width":1,"height":2}},{"widget":{"name":"39b9553d","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HighDataVolumeFlag","query":{"datasetName":"fc2d4844","fields":[{"name":"HighDataVolumeFlag","expression":"`HighDataVolumeFlag`"},{"name":"HighDataVolumeFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"HighDataVolumeFlag","displayName":"HighDataVolumeFlag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HighDataVolumeFlag"}]},"frame":{"showTitle":true,"title":"High Data Volume"}}},"position":{"x":2,"y":110,"width":1,"height":2}},{"widget":{"name":"f055b9df","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_execution_status","query":{"datasetName":"fc2d4844","fields":[{"name":"execution_status","expression":"`execution_status`"},{"name":"execution_status_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"execution_status","displayName":"execution_status","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_execution_status"}]},"frame":{"showTitle":true,"title":"Query Status"}}},"position":{"x":2,"y":112,"width":1,"height":2}},{"widget":{"name":"ca87d842","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_long_running_seconds_treshold","query":{"datasetName":"fc2d4844","parameters":[{"name":"long_running_seconds_treshold","keyword":"long_running_seconds_treshold"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"long_running_seconds_treshold","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_long_running_seconds_treshold"}]},"frame":{"showTitle":true,"title":"Long Running Threshold (s)"}}},"position":{"x":5,"y":110,"width":1,"height":2}},{"widget":{"name":"7f5acabe","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_data_volume_min_gb","query":{"datasetName":"fc2d4844","parameters":[{"name":"data_volume_min_gb","keyword":"data_volume_min_gb"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"data_volume_min_gb","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_data_volume_min_gb"}]},"frame":{"showTitle":true,"title":"High Volume Threshold (GBs)"}}},"position":{"x":5,"y":112,"width":1,"height":2}},{"widget":{"name":"89f6ed7f","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"LongRunningQueryFlag","expression":"`LongRunningQueryFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"LongRunningQueryFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"}]},"displayName":"Is Long Running"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Long Running Queries"},"mark":{"layout":"percent-stack"}}},"position":{"x":0,"y":114,"width":1,"height":5}},{"widget":{"name":"861add0a","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HasSpillFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"}]},"displayName":"Has Spill"}},"frame":{"showTitle":true,"title":"Has Spill Queries"},"mark":{"layout":"percent-stack"}}},"position":{"x":1,"y":114,"width":1,"height":5}},{"widget":{"name":"527b7ada","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HighDataVolumeFlag","expression":"`HighDataVolumeFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HighDataVolumeFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"High Volume Read","color":"#FF3621"},{"value":"Not High Volume Read","color":"#00A972"},{"value":"FINE","color":"#00A972"}]},"displayName":"High Volume"}},"frame":{"showTitle":true,"title":"High Data Volume Reads"},"mark":{"layout":"percent-stack"}}},"position":{"x":2,"y":114,"width":1,"height":5}},{"widget":{"name":"c52b5bec","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"UsedCacheFlag","expression":"`UsedCacheFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"UsedCacheFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"No Cache","color":"#919191"},{"value":"Used Cache","color":"#00A972"}]},"displayName":"Used Cache"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Used Cache"},"mark":{"layout":"percent-stack"}}},"position":{"x":5,"y":114,"width":1,"height":5}},{"widget":{"name":"22ae3697","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"group_key","expression":"`group_key`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"y":{"fieldName":"group_key","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Group Key"},"color":{"fieldName":"group_key","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"No Cache","color":"#8BCAE7"},{"value":"Used Cache","color":"#00A972"}]},"legend":{"hideTitle":true,"title":"Group Key"},"displayName":"High Volume"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Queries By Group Key"},"mark":{"layout":"group"}}},"position":{"x":4,"y":119,"width":2,"height":6}},{"widget":{"name":"51467ee0","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"execution_status","expression":"`execution_status`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"execution_status","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"No Cache","color":"#8BCAE7"},{"value":"Used Cache","color":"#00A972"},{"value":"CANCELED","color":"#919191"},{"value":"FAILED","color":"#FF3621"}]},"displayName":"Status"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Query Status"},"mark":{"layout":"percent-stack"}}},"position":{"x":1,"y":119,"width":1,"height":6}},{"widget":{"name":"85fda833","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HighDataWritesVolumeFlag","expression":"`HighDataWritesVolumeFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HighDataWritesVolumeFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"High Volume Written","color":"#FF3621"},{"value":"Not High Volume Written","color":"#00A972"},{"value":"FINE","color":"#00A972"}]},"displayName":"High Volume"}},"frame":{"showTitle":true,"title":"High Data Volume Writes"},"mark":{"layout":"percent-stack"}}},"position":{"x":3,"y":114,"width":1,"height":5}},{"widget":{"name":"2c93ef68","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"count(*)","expression":"COUNT(`*`)"},{"name":"error_type","expression":"`error_type`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"error_type","scale":{"type":"categorical","mappings":[{"value":"NO ERROR","color":"#00A972"}]},"displayName":"error_type"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Queries by Error Code"}}},"position":{"x":2,"y":119,"width":2,"height":6}},{"widget":{"name":"a88bf97e","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"statement_id","expression":"`statement_id`"},{"name":"query_source_type","expression":"`query_source_type`"},{"name":"query_source_id","expression":"`query_source_id`"},{"name":"QueryWork","expression":"`QueryWork`"},{"name":"executed_by","expression":"`executed_by`"},{"name":"execution_status","expression":"`execution_status`"},{"name":"statement_text","expression":"`statement_text`"},{"name":"warehouse_id","expression":"`warehouse_id`"},{"name":"statement_type","expression":"`statement_type`"},{"name":"client_application","expression":"`client_application`"},{"name":"QueryRuntimeSeconds","expression":"`QueryRuntimeSeconds`"},{"name":"CPUTotalExecutionTime","expression":"`CPUTotalExecutionTime`"},{"name":"ExecutionQueryTime","expression":"`ExecutionQueryTime`"},{"name":"CompilationQueryTime","expression":"`CompilationQueryTime`"},{"name":"QueueQueryTime","expression":"`QueueQueryTime`"},{"name":"StartUpQueryTime","expression":"`StartUpQueryTime`"},{"name":"ResultFetchTime","expression":"`ResultFetchTime`"},{"name":"TotalResourceTimeUsedForAllocation","expression":"`TotalResourceTimeUsedForAllocation`"},{"name":"start_time","expression":"`start_time`"},{"name":"end_time","expression":"`end_time`"},{"name":"read_io_cache_percent","expression":"`read_io_cache_percent`"},{"name":"from_result_cache","expression":"`from_result_cache`"},{"name":"ProportionQueueTime","expression":"`ProportionQueueTime`"},{"name":"FilesRead","expression":"`FilesRead`"},{"name":"FilesPruned","expression":"`FilesPruned`"},{"name":"FilesPrunedProportion","expression":"`FilesPrunedProportion`"},{"name":"ReadDataAmountInGB","expression":"`ReadDataAmountInGB`"},{"name":"WrittenDataAmountInGB","expression":"`WrittenDataAmountInGB`"},{"name":"SpilledDataAmountInGB","expression":"`SpilledDataAmountInGB`"},{"name":"UsedCacheFlag","expression":"`UsedCacheFlag`"},{"name":"HasSpillFlag","expression":"`HasSpillFlag`"},{"name":"ReadDataFlag","expression":"`ReadDataFlag`"},{"name":"UsedWorkerTasksFlag","expression":"`UsedWorkerTasksFlag`"},{"name":"dbt_metadata_json","expression":"`dbt_metadata_json`"},{"name":"error_type","expression":"`error_type`"},{"name":"parsed_dbt_comment","expression":"`parsed_dbt_comment`"},{"name":"IsDBTQuery","expression":"`IsDBTQuery`"},{"name":"AllocatedQueryCostByTime","expression":"`AllocatedQueryCostByTime`"},{"name":"HighDataVolumeFlag","expression":"`HighDataVolumeFlag`"},{"name":"HighDataWritesVolumeFlag","expression":"`HighDataWritesVolumeFlag`"},{"name":"QueryTag","expression":"`QueryTag`"},{"name":"HighQueueingTimeFlag","expression":"`HighQueueingTimeFlag`"},{"name":"HighResultFetchTimeFlag","expression":"`HighResultFetchTimeFlag`"},{"name":"query_profile_url","expression":"`query_profile_url`"},{"name":"url_helper","expression":"`url_helper`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"statement_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ query_profile_url }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"link","visible":true,"order":2,"title":"Query Id (link)","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_id"},{"fieldName":"query_source_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"query_source_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"query_source_type"},{"fieldName":"query_source_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ url_helper }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"link","visible":true,"order":4,"title":"Query Source Id (link)","allowSearch":false,"alignContent":"left","allowHTML":true,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"query_source_id"},{"fieldName":"QueryWork","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":5,"title":"QueryWork","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#8CFFB4"},"rules":[]},"description":"This is the best metric to use for identifying the most costly / greedy queries. Query work is the total time for all operations that use cluster resources. execution + results + compilation time.","displayName":"QueryWork"},{"fieldName":"executed_by","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":6,"title":"executed_by","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"executed_by"},{"fieldName":"execution_status","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":7,"title":"execution_status","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":null},"rules":[{"if":{"column":"execution_status","fn":"=","literal":"FINISHED"},"value":{"foregroundColor":"#3BD973"}},{"if":{"column":"execution_status","fn":"=","literal":"FAILED"},"value":{"foregroundColor":"#E92828"}},{"if":{"column":"execution_status","fn":"=","literal":"CANCELLED"},"value":{"foregroundColor":"#494949"}}]},"displayName":"execution_status"},{"fieldName":"statement_text","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":8,"title":"statement_text","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[]},"displayName":"statement_text"},{"fieldName":"warehouse_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":9,"title":"warehouse_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_id"},{"fieldName":"statement_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":10,"title":"statement_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_type"},{"fieldName":"client_application","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":11,"title":"client_application","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"client_application"},{"fieldName":"QueryRuntimeSeconds","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":12,"title":"QueryRuntimeSeconds","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryRuntimeSeconds"},{"fieldName":"CPUTotalExecutionTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":13,"title":"CPUTotalExecutionTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"CPUTotalExecutionTime"},{"fieldName":"ExecutionQueryTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":14,"title":"ExecutionQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ExecutionQueryTime"},{"fieldName":"CompilationQueryTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":15,"title":"CompilationQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"CompilationQueryTime"},{"fieldName":"QueueQueryTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":16,"title":"QueueQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueueQueryTime"},{"fieldName":"StartUpQueryTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":17,"title":"StartUpQueryTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"StartUpQueryTime"},{"fieldName":"ResultFetchTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":18,"title":"ResultFetchTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ResultFetchTime"},{"fieldName":"TotalResourceTimeUsedForAllocation","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":19,"title":"TotalResourceTimeUsedForAllocation","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"TotalResourceTimeUsedForAllocation"},{"fieldName":"start_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":20,"title":"start_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"start_time"},{"fieldName":"end_time","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":21,"title":"end_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"end_time"},{"fieldName":"read_io_cache_percent","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":25,"title":"read_io_cache_percent","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_io_cache_percent"},{"fieldName":"from_result_cache","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"boolean","displayAs":"boolean","visible":true,"order":26,"title":"from_result_cache","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"from_result_cache"},{"fieldName":"ProportionQueueTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":29,"title":"ProportionQueueTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ProportionQueueTime"},{"fieldName":"FilesRead","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":33,"title":"FilesRead","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"FilesRead"},{"fieldName":"FilesPruned","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":34,"title":"FilesPruned","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"FilesPruned"},{"fieldName":"FilesPrunedProportion","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":35,"title":"FilesPrunedProportion","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"FilesPrunedProportion"},{"fieldName":"ReadDataAmountInGB","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":36,"title":"ReadDataAmountInGB","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ReadDataAmountInGB"},{"fieldName":"WrittenDataAmountInGB","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":37,"title":"WrittenDataAmountInGB","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"WrittenDataAmountInGB"},{"fieldName":"SpilledDataAmountInGB","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":38,"title":"SpilledDataAmountInGB","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"SpilledDataAmountInGB"},{"fieldName":"UsedCacheFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":39,"title":"UsedCacheFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"UsedCacheFlag"},{"fieldName":"HasSpillFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":40,"title":"HasSpillFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HasSpillFlag"},{"fieldName":"ReadDataFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":41,"title":"ReadDataFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"ReadDataFlag"},{"fieldName":"UsedWorkerTasksFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":42,"title":"UsedWorkerTasksFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"UsedWorkerTasksFlag"},{"fieldName":"dbt_metadata_json","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":47,"title":"dbt_metadata_json","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dbt_metadata_json"},{"fieldName":"error_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":49,"title":"error_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"error_type"},{"fieldName":"parsed_dbt_comment","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":56,"title":"parsed_dbt_comment","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"parsed_dbt_comment"},{"fieldName":"IsDBTQuery","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":57,"title":"IsDBTQuery","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"IsDBTQuery"},{"fieldName":"AllocatedQueryCostByTime","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":66,"title":"AllocatedQueryCostByTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"AllocatedQueryCostByTime"},{"fieldName":"HighDataVolumeFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":67,"title":"HighDataVolumeFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HighDataVolumeFlag"},{"fieldName":"HighDataWritesVolumeFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":68,"title":"HighDataWritesVolumeFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HighDataWritesVolumeFlag"},{"fieldName":"QueryTag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":69,"title":"QueryTag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryTag"},{"fieldName":"HighQueueingTimeFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":89,"title":"HighQueueingTimeFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HighQueueingTimeFlag"},{"fieldName":"HighResultFetchTimeFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":90,"title":"HighResultFetchTimeFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"HighResultFetchTimeFlag"}]},"invisibleColumns":[{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"account_id","type":"string","displayAs":"string","order":0,"title":"account_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"workspace_id","type":"string","displayAs":"string","order":1,"title":"workspace_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"update_time","type":"datetime","displayAs":"datetime","order":22,"title":"update_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"read_bytes","type":"integer","displayAs":"number","order":23,"title":"read_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"written_bytes","type":"integer","displayAs":"number","order":24,"title":"written_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"spilled_local_bytes","type":"integer","displayAs":"number","order":27,"title":"spilled_local_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalCPUTime_To_Execution_Time_Ratio","type":"float","displayAs":"number","order":28,"title":"TotalCPUTime_To_Execution_Time_Ratio","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_HasSpillFlag","type":"integer","displayAs":"number","order":43,"title":"Calc_HasSpillFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_ReadDataFlag","type":"decimal","displayAs":"number","order":44,"title":"Calc_ReadDataFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_UsedWorkerTasksFlag","type":"decimal","displayAs":"number","order":45,"title":"Calc_UsedWorkerTasksFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"raw_tagged","type":"string","displayAs":"string","order":46,"title":"raw_tagged","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"error_message","type":"string","displayAs":"string","order":48,"title":"error_message","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"dbt_app","type":"string","displayAs":"string","order":50,"title":"dbt_app","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"dbt_node_id","type":"string","displayAs":"string","order":51,"title":"dbt_node_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"dbt_profile_name","type":"string","displayAs":"string","order":52,"title":"dbt_profile_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"dbt_target_name","type":"string","displayAs":"string","order":53,"title":"dbt_target_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"dbt_version","type":"string","displayAs":"string","order":54,"title":"dbt_version","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"dbt_databricks_version","type":"string","displayAs":"string","order":55,"title":"dbt_databricks_version","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"LongRunningQueryFlag","type":"string","displayAs":"string","order":58,"title":"LongRunningQueryFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Calc_LongRunningQueryFlag","type":"integer","displayAs":"number","order":59,"title":"Calc_LongRunningQueryFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalUsedTimeInWarehouse","type":"float","displayAs":"number","order":60,"title":"TotalUsedTimeInWarehouse","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalStatementTextTimeUsed","type":"float","displayAs":"number","order":61,"title":"TotalStatementTextTimeUsed","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"ProportionOfWarehouseTimeUsedByQuery","type":"float","displayAs":"number","order":62,"title":"ProportionOfWarehouseTimeUsedByQuery","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"WarehouseAvgTaskToExecutionTimeRatio","type":"float","displayAs":"number","order":63,"title":"WarehouseAvgTaskToExecutionTimeRatio","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"QueryEfficiencyRatio","type":"float","displayAs":"number","order":64,"title":"QueryEfficiencyRatio","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"Total_Warehouse_Period_Dollars","type":"float","displayAs":"number","order":65,"title":"Total_Warehouse_Period_Dollars","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"warehouse_name","type":"string","displayAs":"string","order":71,"title":"warehouse_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"warehouse_type","type":"string","displayAs":"string","order":72,"title":"warehouse_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"warehouse_size","type":"string","displayAs":"string","order":74,"title":"warehouse_size","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"warehouse_channel","type":"string","displayAs":"string","order":77,"title":"warehouse_channel","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"total_window_seconds","type":"integer","displayAs":"number","order":85,"title":"total_window_seconds","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"rounded_proportion_queue_time","type":"float","displayAs":"number","order":86,"title":"rounded_proportion_queue_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"TotalResourceTimeUsedForAllocationWithMetadata","type":"float","displayAs":"number","order":87,"title":"TotalResourceTimeUsedForAllocationWithMetadata","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"ProportionResultFetchTime","type":"float","displayAs":"number","order":88,"title":"ProportionResultFetchTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"url_helper","type":"string","displayAs":"string","order":91,"title":"url_helper","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"query_profile_url","type":"string","displayAs":"string","order":92,"title":"query_profile_url","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"clean_warehouse_name","type":"string","displayAs":"string","order":100077,"title":"clean_warehouse_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"min_clusters","type":"integer","displayAs":"number","order":100080,"title":"min_clusters","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"max_clusters","type":"integer","displayAs":"number","order":100081,"title":"max_clusters","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"auto_stop_minutes","type":"integer","displayAs":"number","order":100082,"title":"auto_stop_minutes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"tags","type":"complex","displayAs":"json","order":100083,"title":"tags","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"change_time","type":"datetime","displayAs":"datetime","order":100084,"title":"change_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"delete_time","type":"datetime","displayAs":"datetime","order":100085,"title":"delete_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"group_key","type":"string","displayAs":"string","order":100089,"title":"group_key","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"dateTimeFormat":"DD/MM/YY HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"time_key","type":"datetime","displayAs":"datetime","order":100090,"title":"time_key","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"SpillMeasureFlag","type":"integer","displayAs":"number","order":100088,"title":"SpillMeasureFlag","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"showDescription":true,"title":"Query Performance Detail","description":"Table of all Queries and their statistics"}}},"position":{"x":0,"y":125,"width":6,"height":10}},{"widget":{"name":"a8640919","textbox_spec":"## Statement Level Cost Attribution\n-----\n### WARNING: This allocation includes the total cost of a warehouse divided by query work for each query - which DOES include idle time. Other EDWs and Dashboards may exclude idle time - so be very careful when comparing costs across platforms. This is a directional allocation. For true TCO comparisons, measure the TCO of the solution. \nThis section is slightly different than the main cost allocation section tab. Instead of aggregating costs at the unique query statement (query signature) level, it aggregates query statements (not unique) at the user level. It aims to answer the question of \"of all the statements being executed, how much relative warehouse usage is being used by each user?\""},"position":{"x":0,"y":135,"width":5,"height":3}},{"widget":{"name":"91bb8b32","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HighQueueingTimeFlag","query":{"datasetName":"fc2d4844","fields":[{"name":"HighQueueingTimeFlag","expression":"`HighQueueingTimeFlag`"},{"name":"HighQueueingTimeFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"HighQueueingTimeFlag","displayName":"HighQueueingTimeFlag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HighQueueingTimeFlag"}]},"frame":{"showTitle":true,"title":"Queued Too Much"}}},"position":{"x":0,"y":112,"width":1,"height":2}},{"widget":{"name":"13f0093c","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HighResultFetchTimeFlag","query":{"datasetName":"fc2d4844","fields":[{"name":"HighResultFetchTimeFlag","expression":"`HighResultFetchTimeFlag`"},{"name":"HighResultFetchTimeFlag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"HighResultFetchTimeFlag","displayName":"HighResultFetchTimeFlag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_HighResultFetchTimeFlag"}]},"frame":{"showTitle":true,"title":"Long Result Fetch Time"}}},"position":{"x":1,"y":112,"width":1,"height":2}},{"widget":{"name":"9edaeee6","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_queue_proportion_threshold","query":{"datasetName":"fc2d4844","parameters":[{"name":"queue_proportion_threshold","keyword":"queue_proportion_threshold"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"queue_proportion_threshold","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_queue_proportion_threshold"}]},"frame":{"showTitle":true,"title":"% Time Spent Queuing Threshold"}}},"position":{"x":3,"y":112,"width":2,"height":2}},{"widget":{"name":"1b6ec22f","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_result_proportion_threshold","query":{"datasetName":"fc2d4844","parameters":[{"name":"result_proportion_threshold","keyword":"result_proportion_threshold"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"result_proportion_threshold","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_result_proportion_threshold"}]},"frame":{"showTitle":true,"title":"% Time Spent Result Fetching Threshold"}}},"position":{"x":3,"y":110,"width":2,"height":2}},{"widget":{"name":"a4423449","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"sum(AllocatedQueryCostByTime)","expression":"SUM(`AllocatedQueryCostByTime`)"},{"name":"executed_by","expression":"`executed_by`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(AllocatedQueryCostByTime)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"displayName":"Allocated Query Cost"},"color":{"fieldName":"executed_by","scale":{"type":"categorical"},"legend":{"position":"right"},"displayName":"executed_by"},"label":{"show":true}},"frame":{"showTitle":true,"showDescription":true,"title":"Allocated Query Cost By User","description":"Cost attributed to query/user based on warehouse selected window and workload"}}},"position":{"x":0,"y":154,"width":3,"height":8}},{"widget":{"name":"45f5408b","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"sum(QueryWork)","expression":"SUM(`QueryWork`)"},{"name":"executed_by","expression":"`executed_by`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"pie","encodings":{"angle":{"fieldName":"sum(QueryWork)","scale":{"type":"quantitative"},"format":{"type":"number-plain","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"displayName":"Query Work"},"color":{"fieldName":"executed_by","scale":{"type":"categorical"},"legend":{"position":"right"},"displayName":"executed_by"},"label":{"show":true}},"frame":{"showTitle":true,"showDescription":true,"title":"Query Work By User (NOT DOLLARS)","description":"Raw work of queries aggregated by user (NOT ALLOCATED)"}}},"position":{"x":3,"y":154,"width":3,"height":8}},{"widget":{"name":"275e3875","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HighQueueingTimeFlag","expression":"`HighQueueingTimeFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HighQueueingTimeFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"High Volume Written","color":"#FF3621"},{"value":"Not High Volume Written","color":"#00A972"},{"value":"FINE","color":"#00A972"},{"value":"High Queue Time","color":"#FF3621"}]},"displayName":"High Queueing"}},"frame":{"showTitle":true,"title":"High Queueing"},"mark":{"layout":"percent-stack"}}},"position":{"x":0,"y":119,"width":1,"height":6}},{"widget":{"name":"da1c6b6a","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"HighResultFetchTimeFlag","expression":"`HighResultFetchTimeFlag`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Queries"},"color":{"fieldName":"HighResultFetchTimeFlag","scale":{"type":"categorical","mappings":[{"value":"Long Running","color":"#FF3621"},{"value":"Short Running","color":"#00A972"},{"value":"No Spill","color":"#00A972"},{"value":"Spilled Data To Disk","color":"#FF3621"},{"value":"High Relative Volume Read","color":"#FF3621"},{"value":"Not High Relative Volume","color":"#00A972"},{"value":"High Volume Written","color":"#FF3621"},{"value":"Not High Volume Written","color":"#00A972"},{"value":"FINE","color":"#00A972"},{"value":"High Queue Time","color":"#FF3621"},{"value":"High Result Fetch Time","color":"#FF3621"}]},"displayName":"High Queueing"}},"frame":{"showTitle":true,"title":"High Result Fetch"},"mark":{"layout":"percent-stack"}}},"position":{"x":4,"y":114,"width":1,"height":5}},{"widget":{"name":"f3bcc9e9","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"time_key","expression":"`time_key`"},{"name":"avg(AllocatedQueryCostByTime)","expression":"AVG(`AllocatedQueryCostByTime`)"},{"name":"median(AllocatedQueryCostByTime)","expression":"MEDIAN(`AllocatedQueryCostByTime`)"},{"name":"percentile(AllocatedQueryCostByTime, percentage=0_95)","expression":"PERCENTILE(`AllocatedQueryCostByTime`, 0.95)"},{"name":"percentile(AllocatedQueryCostByTime, percentage=0_99)","expression":"PERCENTILE(`AllocatedQueryCostByTime`, 0.99)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"displayName":"time_key"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"avg(AllocatedQueryCostByTime)","displayName":"Avg Cost/Query"},{"fieldName":"median(AllocatedQueryCostByTime)","displayName":"Median Cost/Query"},{"fieldName":"percentile(AllocatedQueryCostByTime, percentage=0_95)","displayName":"P95 Cost/Query"},{"fieldName":"percentile(AllocatedQueryCostByTime, percentage=0_99)","displayName":"P99 Cost/Query"}],"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":3}}},"color":{"legend":{"position":"bottom"}},"label":{"show":true}},"frame":{"showTitle":true,"showDescription":true,"title":"Cost Per Query Over Time","description":"A very high level relative cost/query metric as a high level proxy for efficiency"},"mark":{"layout":"group"}}},"position":{"x":0,"y":138,"width":5,"height":8}},{"widget":{"name":"aa9eb3dc","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"client_application","expression":"`client_application`"},{"name":"query_source_id","expression":"`query_source_id`"},{"name":"sum(AllocatedQueryCostByTime)","expression":"SUM(`AllocatedQueryCostByTime`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"query_source_id","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"query_source_id"},"y":{"fieldName":"sum(AllocatedQueryCostByTime)","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"scale":{"type":"quantitative"},"displayName":"Allocated Query Cost"},"color":{"fieldName":"client_application","scale":{"type":"categorical"},"displayName":"client_application"},"label":{"show":true}},"frame":{"showTitle":true,"showDescription":true,"title":"Allocated Query Cost By Query Source Id","description":"Cost attributed to query/user based on warehouse selected window and workload"}}},"position":{"x":0,"y":162,"width":6,"height":10}},{"widget":{"name":"c76fe184","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbsql_discount","query":{"datasetName":"fc2d4844","parameters":[{"name":"dbsql_discount","keyword":"dbsql_discount"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"dbsql_discount","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbsql_discount"}]},"frame":{"showTitle":true,"title":"DBSQL Discount %","showDescription":false,"description":"Including metadata operations in cost allocation includes DESCRIBE, SHOW, etc. commands"}}},"position":{"x":5,"y":135,"width":1,"height":3}},{"widget":{"name":"5f9b7b82","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"client_application","expression":"`client_application`"},{"name":"sum(AllocatedQueryCostByTime)","expression":"SUM(`AllocatedQueryCostByTime`)"},{"name":"query_source_type","expression":"`query_source_type`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(AllocatedQueryCostByTime)","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"scale":{"type":"quantitative"},"displayName":"Allocated Query Cost"},"y":{"fieldName":"query_source_type","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"query_source_type"},"color":{"fieldName":"client_application","scale":{"type":"categorical"},"displayName":"client_application"},"label":{"show":true}},"frame":{"showTitle":true,"showDescription":true,"title":"Allocated Query Cost By Query Source Type","description":"Cost attributed to query/user based on warehouse selected window and workload"}}},"position":{"x":0,"y":146,"width":6,"height":8}},{"widget":{"name":"cb1ec328","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"avg(AllocatedQueryCostByTime)","expression":"AVG(`AllocatedQueryCostByTime`)"},{"name":"median(AllocatedQueryCostByTime)","expression":"MEDIAN(`AllocatedQueryCostByTime`)"},{"name":"percentile(AllocatedQueryCostByTime, percentage=0_95)","expression":"PERCENTILE(`AllocatedQueryCostByTime`, 0.95)"},{"name":"percentile(AllocatedQueryCostByTime, percentage=0_99)","expression":"PERCENTILE(`AllocatedQueryCostByTime`, 0.99)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"avg(AllocatedQueryCostByTime)","displayName":"Avg Cost/Query"},{"fieldName":"median(AllocatedQueryCostByTime)","displayName":"Median Cost/Query"},{"fieldName":"percentile(AllocatedQueryCostByTime, percentage=0_95)","displayName":"P95 Cost/Query"},{"fieldName":"percentile(AllocatedQueryCostByTime, percentage=0_99)","displayName":"P99 Cost/Query"}],"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":3}}},"color":{"legend":{"position":"bottom"}},"label":{"show":true}},"frame":{"showTitle":true,"showDescription":true,"title":"Cost Per Query For Window","description":"A very high level relative cost/query metric as a high level proxy for efficiency"},"mark":{"layout":"group"}}},"position":{"x":5,"y":138,"width":1,"height":8}},{"widget":{"name":"5dd2d230","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efed719f8210ed9402925334d494d6_toggle","query":{"datasetName":"3ebbfb19","fields":[{"name":"toggle","expression":"`toggle`"},{"name":"toggle_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_group_key","query":{"datasetName":"fc2d4844","parameters":[{"name":"group_key","keyword":"group_key"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"toggle","displayName":"toggle","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efed719f8210ed9402925334d494d6_toggle"},{"parameterName":"group_key","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_group_key"}]},"disallowAll":true,"selection":{"defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Query Source Type"}]}}},"frame":{"showTitle":true,"title":"Show Metrics By:"}}},"position":{"x":2,"y":16,"width":2,"height":1}},{"widget":{"name":"19638882","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efed783dd61b9ab041fc65e1ee3c62_time_key","query":{"datasetName":"6d9636e5","fields":[{"name":"time_key","expression":"`time_key`"},{"name":"time_key_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_param_time_key","query":{"datasetName":"fc2d4844","parameters":[{"name":"param_time_key","keyword":"param_time_key"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137cd16139ed6ea8efc888a9e_param_time_key","query":{"datasetName":"547c0662","parameters":[{"name":"param_time_key","keyword":"param_time_key"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"time_key","displayName":"time_key","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efed783dd61b9ab041fc65e1ee3c62_time_key"},{"parameterName":"param_time_key","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_param_time_key"},{"parameterName":"param_time_key","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137cd16139ed6ea8efc888a9e_param_time_key"}]},"disallowAll":true,"frame":{"showTitle":true,"title":"Time Grain"}}},"position":{"x":4,"y":16,"width":2,"height":1}},{"widget":{"name":"32cc73eb","queries":[{"name":"main_query","query":{"datasetName":"547c0662","fields":[{"name":"warehouse_name","expression":"`warehouse_name`"},{"name":"percentile(PeakQueued, percentage=0_5)","expression":"PERCENTILE(`PeakQueued`, 0.5)"},{"name":"percentile(PeakQueued, percentage=0_75)","expression":"PERCENTILE(`PeakQueued`, 0.75)"},{"name":"percentile(PeakQueued, percentage=0_95)","expression":"PERCENTILE(`PeakQueued`, 0.95)"},{"name":"percentile(PeakQueued, percentage=0_99)","expression":"PERCENTILE(`PeakQueued`, 0.99)"},{"name":"percentile(PeakQueued, percentage=1)","expression":"PERCENTILE(`PeakQueued`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"warehouse_name","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Warehouse"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(PeakQueued, percentage=0_5)","displayName":"P50 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=0_75)","displayName":"P75 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=0_95)","displayName":"P95 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=0_99)","displayName":"P99 # Queued"},{"fieldName":"percentile(PeakQueued, percentage=1)","displayName":"P100 # Queued"}],"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"axis":{"title":"# Queued"}},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Peak Queued By Warehouse (Identify Highest Concurrency Warehouses)"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":59,"width":6,"height":7}},{"widget":{"name":"1f476735","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"time_key","expression":"`time_key`"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_5)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.5)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_95)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.95)"},{"name":"percentile(QueryRuntimeSeconds, percentage=0_99)","expression":"PERCENTILE(`QueryRuntimeSeconds`, 0.99)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"displayName":"Start Time"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_5)","displayName":"P50 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_95)","displayName":"P95 Runtime"},{"fieldName":"percentile(QueryRuntimeSeconds, percentage=0_99)","displayName":"P99 Runtime"}],"axis":{"title":"Runtime (s)"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Query Runtime Performance Trends"},"mark":{"colors":["#00A972","#FFAB00","#FF3621","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":42,"width":6,"height":7}},{"widget":{"name":"597daf58","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"clean_warehouse_name","expression":"`clean_warehouse_name`"},{"name":"percentile(ReadDataAmountInGB, percentage=0_5)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.5)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_75)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.75)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_95)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.95)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.99)"},{"name":"percentile(ReadDataAmountInGB, percentage=1)","expression":"PERCENTILE(`ReadDataAmountInGB`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"clean_warehouse_name","scale":{"type":"categorical"},"displayName":"Warehouse"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_5)","displayName":"P50 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_75)","displayName":"P75 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_95)","displayName":"P95 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_99)","displayName":"P99 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=1)","displayName":"P100 GB Read"}],"axis":{"title":"GBs Read"},"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}}},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Data Volume Distributions By Warehouse (GBs)"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":94,"width":6,"height":7}},{"widget":{"name":"b12d2c02","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"time_key","expression":"`time_key`"},{"name":"percentile(ReadDataAmountInGB, percentage=0_5)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.5)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_75)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.75)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_95)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.95)"},{"name":"percentile(ReadDataAmountInGB, percentage=0_99)","expression":"PERCENTILE(`ReadDataAmountInGB`, 0.99)"},{"name":"percentile(ReadDataAmountInGB, percentage=1)","expression":"PERCENTILE(`ReadDataAmountInGB`, 1)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"displayName":"time_key"},"y":{"scale":{"type":"quantitative"},"fields":[{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_5)","displayName":"P50 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_75)","displayName":"P75 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_95)","displayName":"P95 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=0_99)","displayName":"P99 GB Read"},{"fieldName":"percentile(ReadDataAmountInGB, percentage=1)","displayName":"P100 GB Read"}],"axis":{"title":"GBs Read"},"format":{"type":"number-plain","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}}},"color":{"legend":{"position":"right"}},"label":{"show":true}},"frame":{"showTitle":true,"title":"Data Volume Distribution Over Time"},"mark":{"colors":["#00A972","#FCA4A1","#AB4057","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"],"layout":"group"}}},"position":{"x":0,"y":101,"width":6,"height":7}},{"widget":{"name":"009fe3d1","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbt_node_id","query":{"datasetName":"fc2d4844","fields":[{"name":"dbt_node_id","expression":"`dbt_node_id`"},{"name":"dbt_node_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"dbt_node_id","displayName":"dbt_node_id","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137b9188cb7ca60987db14031_dbt_node_id"}]},"frame":{"showTitle":true,"title":"DBT Node"}}},"position":{"x":5,"y":8,"width":1,"height":2}},{"widget":{"name":"e87b4029","queries":[{"name":"main_query","query":{"datasetName":"fc2d4844","fields":[{"name":"group_key","expression":"`group_key`"},{"name":"time_key","expression":"`time_key`"},{"name":"count(*)","expression":"COUNT(`*`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"time_key","scale":{"type":"temporal"},"displayName":"Start Time"},"y":{"fieldName":"count(*)","scale":{"type":"quantitative"},"displayName":"Count of Records"},"color":{"fieldName":"group_key","scale":{"type":"categorical"},"legend":{"hideTitle":true,"position":"bottom"},"displayName":"group_key"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Query Count Over Time By Group Key"}}},"position":{"x":2,"y":17,"width":4,"height":13}}]},{"name":"a5cec7de","displayName":"Query Cost Allocation","layout":[{"widget":{"name":"7ad62e8b","textbox_spec":"# Query Statement Cost Allocation Advisor\n-----\nThis section helps to allocate query runtime cost across the warehouse down to the query level. The query costs are aggregated at the \"query signature\" level, which is a unique SQL statement (excluding comments) executed. This is to account for multiple execution and users executing the same query. "},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"c512cb4e","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_warehouse_name","query":{"datasetName":"304214bb","fields":[{"name":"warehouse_name","expression":"`warehouse_name`"},{"name":"warehouse_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_warehouse_name","query":{"datasetName":"871b75c8","parameters":[{"name":"warehouse_name","keyword":"warehouse_name"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"warehouse_name","displayName":"warehouse_name","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01efa6cfcd561aa1b2a7ebb44e5c4361_warehouse_name"},{"parameterName":"warehouse_name","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_warehouse_name"}]},"frame":{"showTitle":true,"title":"Warehouses"}}},"position":{"x":0,"y":2,"width":2,"height":2}},{"widget":{"name":"17cf7f7d","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_time_range","query":{"datasetName":"871b75c8","parameters":[{"name":"time_range","keyword":"time_range"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-range-picker","encodings":{"fields":[{"parameterName":"time_range","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_time_range"}]},"frame":{"showTitle":true,"title":"Time Range"}}},"position":{"x":2,"y":2,"width":2,"height":2}},{"widget":{"name":"7328335b","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_TopNFilter","query":{"datasetName":"871b75c8","fields":[{"name":"TopNFilter","expression":"`TopNFilter`"},{"name":"TopNFilter_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"TopNFilter","displayName":"TopNFilter","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_TopNFilter"}]},"selection":{"defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"Top N Query"}]}}},"frame":{"showTitle":true,"title":"Top N Flag"}}},"position":{"x":4,"y":4,"width":1,"height":2}},{"widget":{"name":"3c5dd141","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_top_n","query":{"datasetName":"871b75c8","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_top_n"}]},"selection":{"defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"10"}]}}},"frame":{"showTitle":true,"title":"Top N Parameter","showDescription":true,"description":"(Top N for each warehouse)"}}},"position":{"x":5,"y":4,"width":1,"height":2}},{"widget":{"name":"4d9fac65","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbt_target_name","query":{"datasetName":"871b75c8","fields":[{"name":"dbt_target_name","expression":"`dbt_target_name`"},{"name":"dbt_target_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"dbt_target_name","displayName":"dbt_target_name","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbt_target_name"}]},"frame":{"showTitle":true,"title":"DBT Target"}}},"position":{"x":2,"y":4,"width":1,"height":2}},{"widget":{"name":"f0b58353","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbt_node_id","query":{"datasetName":"871b75c8","fields":[{"name":"dbt_node_id","expression":"`dbt_node_id`"},{"name":"dbt_node_id_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"dbt_node_id","displayName":"dbt_node_id","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbt_node_id"}]},"frame":{"showTitle":true,"title":"DBT Node"}}},"position":{"x":3,"y":4,"width":1,"height":2}},{"widget":{"name":"7ed19e5f","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_QueryTag","query":{"datasetName":"871b75c8","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"QueryTag_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"QueryTag","displayName":"QueryTag","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_QueryTag"}]},"frame":{"showTitle":true,"title":"Query Tag (custom)"}}},"position":{"x":0,"y":4,"width":1,"height":2}},{"widget":{"name":"c7a9fb2d","queries":[{"name":"main_query","query":{"datasetName":"871b75c8","fields":[{"name":"QueryProportionParetoFlag","expression":"`QueryProportionParetoFlag`"},{"name":"sum(StatementAllocatedDollars)","expression":"SUM(`StatementAllocatedDollars`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(StatementAllocatedDollars)","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"none","decimalPlaces":{"type":"max","places":0}},"scale":{"type":"quantitative"},"axis":{"hideLabels":false,"hideTitle":false},"displayName":"Allocated Query Cost ($)"},"y":{"fieldName":"QueryProportionParetoFlag","axis":{"hideLabels":true},"scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query Signature"},"color":{"fieldName":"QueryProportionParetoFlag","scale":{"type":"categorical"},"displayName":"Query Signature"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Stack Ranked Cost Per Query Signature","showDescription":true,"description":"Query Signature = hashed unique SQL that is executed"}}},"position":{"x":0,"y":6,"width":6,"height":9}},{"widget":{"name":"2b747d0c","queries":[{"name":"main_query","query":{"datasetName":"871b75c8","fields":[{"name":"sum(StatementAllocatedDollars)","expression":"SUM(`StatementAllocatedDollars`)"},{"name":"dbt_target_name","expression":"`dbt_target_name`"},{"name":"dbt_node_id","expression":"`dbt_node_id`"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"heatmap","encodings":{"x":{"fieldName":"dbt_target_name","scale":{"type":"categorical"},"displayName":"DBT Target"},"y":{"fieldName":"dbt_node_id","scale":{"type":"categorical"},"displayName":"DBT Model"},"color":{"fieldName":"sum(StatementAllocatedDollars)","scale":{"type":"quantitative"},"displayName":"Allocated Query Cost ($)"}},"frame":{"showTitle":true,"title":"Allocated Cost By DBT Target and Model (node)"}}},"position":{"x":0,"y":24,"width":3,"height":8}},{"widget":{"name":"6c500c11","queries":[{"name":"main_query","query":{"datasetName":"871b75c8","fields":[{"name":"warehouse_id","expression":"`warehouse_id`"},{"name":"workspace_id","expression":"`workspace_id`"},{"name":"QueryCostRank","expression":"`QueryCostRank`"},{"name":"LatestRunInPeriod","expression":"`LatestRunInPeriod`"},{"name":"FirstRunInPeriod","expression":"`FirstRunInPeriod`"},{"name":"StatementAllocatedDollars","expression":"`StatementAllocatedDollars`"},{"name":"StatementAllocatedDBUs","expression":"`StatementAllocatedDBUs`"},{"name":"statetment_type","expression":"`statetment_type`"},{"name":"statement_text","expression":"`statement_text`"},{"name":"QueryTag","expression":"`QueryTag`"},{"name":"NumberOfExecutions","expression":"`NumberOfExecutions`"},{"name":"AvgRuntimeInSeconds","expression":"`AvgRuntimeInSeconds`"},{"name":"UserRunCounts","expression":"`UserRunCounts`"},{"name":"query_signature","expression":"`query_signature`"},{"name":"TotalWarehouseTimeUsed","expression":"`TotalWarehouseTimeUsed`"},{"name":"Total_Warehouse_Period_DBUs","expression":"`Total_Warehouse_Period_DBUs`"},{"name":"Total_Warehouse_Period_Dollars","expression":"`Total_Warehouse_Period_Dollars`"},{"name":"TotalStatementTimeUsed","expression":"`TotalStatementTimeUsed`"},{"name":"dbt_profile_id","expression":"`dbt_profile_id`"},{"name":"QueryProportionParetoFlag","expression":"`QueryProportionParetoFlag`"},{"name":"TopNFilter","expression":"`TopNFilter`"},{"name":"raw_tagged","expression":"`raw_tagged`"},{"name":"dbt_app","expression":"`dbt_app`"},{"name":"dbt_node_id","expression":"`dbt_node_id`"},{"name":"dbt_target_name","expression":"`dbt_target_name`"},{"name":"dbt_version","expression":"`dbt_version`"},{"name":"parsed_dbt_comment","expression":"`parsed_dbt_comment`"},{"name":"IsDBTQuery","expression":"`IsDBTQuery`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"warehouse_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":0,"title":"warehouse_id","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_id"},{"fieldName":"workspace_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"workspace_id","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"workspace_id"},{"fieldName":"QueryCostRank","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":2,"title":"QueryCostRank","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#3BD973"},"rules":[]},"displayName":"QueryCostRank"},{"fieldName":"LatestRunInPeriod","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":3,"title":"LatestRunInPeriod","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"LatestRunInPeriod"},{"fieldName":"FirstRunInPeriod","dateTimeFormat":"YYYY-MM-DD HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":4,"title":"FirstRunInPeriod","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"FirstRunInPeriod"},{"fieldName":"StatementAllocatedDollars","numberFormat":"$0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":5,"title":"Allocated $","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"description":"Allocated $","cellFormat":{"default":{"foregroundColor":"#04bd44"},"rules":[]},"displayName":"StatementAllocatedDollars"},{"fieldName":"StatementAllocatedDBUs","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":6,"title":"Allocated DBUs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"StatementAllocatedDBUs"},{"fieldName":"statetment_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":10,"title":"statetment_type","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statetment_type"},{"fieldName":"statement_text","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":11,"title":"statement_text","allowSearch":true,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#356AFF"},"rules":[]},"displayName":"statement_text"},{"fieldName":"QueryTag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":12,"title":"QueryTag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryTag"},{"fieldName":"NumberOfExecutions","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":13,"title":"NumberOfExecutions","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#FB8D3D"},"rules":[]},"displayName":"NumberOfExecutions"},{"fieldName":"AvgRuntimeInSeconds","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":14,"title":"AvgRuntimeInSeconds","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#E92828"},"rules":[]},"displayName":"AvgRuntimeInSeconds"},{"fieldName":"UserRunCounts","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":15,"title":"UserRunCounts","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"cellFormat":{"default":{"foregroundColor":"#604FE9"},"rules":[]},"displayName":"UserRunCounts"},{"fieldName":"query_signature","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":16,"title":"query_signature","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"query_signature"},{"fieldName":"TotalWarehouseTimeUsed","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":17,"title":"TotalWarehouseTimeUsed","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"TotalWarehouseTimeUsed"},{"fieldName":"Total_Warehouse_Period_DBUs","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":18,"title":"Total_Warehouse_Period_DBUs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"Total_Warehouse_Period_DBUs"},{"fieldName":"Total_Warehouse_Period_Dollars","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":19,"title":"Total_Warehouse_Period_Dollars","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"Total_Warehouse_Period_Dollars"},{"fieldName":"TotalStatementTimeUsed","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":20,"title":"TotalStatementTimeUsed","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"TotalStatementTimeUsed"},{"fieldName":"dbt_profile_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":21,"title":"dbt_profile_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dbt_profile_id"},{"fieldName":"QueryProportionParetoFlag","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":22,"title":"QueryProportionParetoFlag","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"QueryProportionParetoFlag"},{"fieldName":"TopNFilter","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":23,"title":"TopNFilter","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"TopNFilter"},{"fieldName":"raw_tagged","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":24,"title":"raw_tagged","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"raw_tagged"},{"fieldName":"dbt_app","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":25,"title":"dbt_app","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dbt_app"},{"fieldName":"dbt_node_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":26,"title":"dbt_node_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dbt_node_id"},{"fieldName":"dbt_target_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":27,"title":"dbt_target_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dbt_target_name"},{"fieldName":"dbt_version","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":28,"title":"dbt_version","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dbt_version"},{"fieldName":"parsed_dbt_comment","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":29,"title":"parsed_dbt_comment","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"parsed_dbt_comment"},{"fieldName":"IsDBTQuery","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":30,"title":"IsDBTQuery","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"IsDBTQuery"}]},"invisibleColumns":[{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"CumulativeProportionOfWarehouseTime","type":"float","displayAs":"number","order":7,"title":"CumulativeProportionOfWarehouseTime","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"StatementTaskTimeProportion","type":"float","displayAs":"number","order":8,"title":"StatementTaskTimeProportion","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"StatementWarehouseTimePercentage","type":"float","displayAs":"number","order":9,"title":"StatementWarehouseTimePercentage","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"title":"Query Signature Cost Allocation Detail","showDescription":true,"description":"+ you can get user level query execution details by scrolling this table -->"}}},"position":{"x":0,"y":15,"width":6,"height":9}},{"widget":{"name":"7c3693b1","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_statetment_type","query":{"datasetName":"871b75c8","fields":[{"name":"statetment_type","expression":"`statetment_type`"},{"name":"statetment_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"statetment_type","displayName":"statetment_type","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_statetment_type"}]},"frame":{"showTitle":true,"title":"Statement Type"}}},"position":{"x":1,"y":4,"width":1,"height":2}},{"widget":{"name":"13ea7f07","queries":[{"name":"main_query","query":{"datasetName":"871b75c8","fields":[{"name":"QueryTag","expression":"`QueryTag`"},{"name":"sum(StatementAllocatedDollars)","expression":"SUM(`StatementAllocatedDollars`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"QueryTag","scale":{"type":"categorical"},"displayName":"Query Tag"},"y":{"fieldName":"sum(StatementAllocatedDollars)","scale":{"type":"quantitative"},"displayName":"Allocated Query Cost ($)"},"color":{"fieldName":"QueryTag","scale":{"type":"categorical"},"displayName":"QueryTag"},"label":{"show":true}},"frame":{"showTitle":true,"title":"Allocated Cost By Query Tag"}}},"position":{"x":3,"y":24,"width":3,"height":8}},{"widget":{"name":"03e4adf1","queries":[{"name":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbsql_discount","query":{"datasetName":"871b75c8","parameters":[{"name":"dbsql_discount","keyword":"dbsql_discount"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"dbsql_discount","queryName":"parameter_dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_dbsql_discount"}]},"selection":{"defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},"frame":{"showTitle":true,"title":"DBSQL Discount %"}}},"position":{"x":4,"y":2,"width":1,"height":2}},{"widget":{"name":"6ade634b","queries":[{"name":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_StatementAllocatedDollars","query":{"datasetName":"871b75c8","fields":[{"name":"min(StatementAllocatedDollars)","expression":"MIN(`StatementAllocatedDollars`)"},{"name":"max(StatementAllocatedDollars)","expression":"MAX(`StatementAllocatedDollars`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"range-slider","encodings":{"fields":[{"fieldName":"StatementAllocatedDollars","displayName":"StatementAllocatedDollars","queryName":"dashboards/01ef706137b51396ae0e5e660ffae393/datasets/01ef706137c11a2988927fc539a76045_StatementAllocatedDollars"}]},"frame":{"showTitle":true,"title":"Allocated Cost ($)"},"selection":{"defaultSelection":{"range":{"dataType":"DOUBLE","min":{"value":"0.01"},"max":{"value":""}}}}}},"position":{"x":5,"y":2,"width":1,"height":2}}]}]}